{"ast":null,"code":"import React,{useEffect,useState}from'react';import api from'../api';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function WoredaDashboard(){const[rows,setRows]=useState([]);const[loading,setLoading]=useState(true);const reload=async()=>{setLoading(true);try{setRows(await api('/api/requests'));}catch(e){console.error(e);}setLoading(false);};useEffect(()=>{reload();},[]);const act=async(id,action)=>{await api(\"/api/requests/\".concat(id,\"/status\"),{method:'PUT',body:{action}});reload();};const del=async id=>{await api(\"/api/requests/\".concat(id),{method:'DELETE'});reload();};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\" Woreda Dashboard \"}),\" \",loading?'Loading...':/*#__PURE__*/_jsxs(\"table\",{children:[/*#__PURE__*/_jsxs(\"thead\",{children:[\" \",/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\" # \"}),/*#__PURE__*/_jsx(\"th\",{children:\"Farmer\"}),\" \",/*#__PURE__*/_jsx(\"th\",{children:\" Product \"}),/*#__PURE__*/_jsx(\"th\",{children:\"Qty\"}),\" \",/*#__PURE__*/_jsx(\"th\",{children:\" Kebele \"}),/*#__PURE__*/_jsx(\"th\",{children:\"Status\"}),\" \",/*#__PURE__*/_jsx(\"th\",{children:\" Action \"}),\" \"]}),\" \"]}),\" \",/*#__PURE__*/_jsxs(\"tbody\",{children:[\" \",rows.map(r=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsxs(\"td\",{children:[\" \",r.id,\" \"]}),/*#__PURE__*/_jsx(\"td\",{children:r.farmer_name}),\" \",/*#__PURE__*/_jsxs(\"td\",{children:[\" \",r.product_name,\" \"]}),/*#__PURE__*/_jsx(\"td\",{children:r.quantity}),/*#__PURE__*/_jsxs(\"td\",{children:[\" \",r.kebele_name,\" \"]}),/*#__PURE__*/_jsx(\"td\",{children:r.status}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsxs(\"label\",{children:[\" \",/*#__PURE__*/_jsx(\"input\",{type:\"radio\",name:\"act-\".concat(r.id),onChange:()=>act(r.id,'Accept')}),\" Accept\"]}),/*#__PURE__*/_jsxs(\"label\",{children:[\" \",/*#__PURE__*/_jsx(\"input\",{type:\"radio\",name:\"act-\".concat(r.id),onChange:()=>act(r.id,'Approve')}),\" Approve\"]}),/*#__PURE__*/_jsxs(\"label\",{children:[\" \",/*#__PURE__*/_jsx(\"input\",{type:\"radio\",name:\"act-\".concat(r.id),onChange:()=>act(r.id,'Reject')}),\" Reject\"]}),\" \",r.status==='Rejected'&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>del(r.id),children:\" Delete \"}),\" \"]}),\" \"]},r.id)),\" \"]}),\" \"]}),\" \"]});}","map":{"version":3,"names":["React","useEffect","useState","api","jsx","_jsx","jsxs","_jsxs","WoredaDashboard","rows","setRows","loading","setLoading","reload","e","console","error","act","id","action","concat","method","body","del","children","map","r","farmer_name","product_name","quantity","kebele_name","status","type","name","onChange","onClick"],"sources":["D:/FARMERS/frontend/src/dashboards/WoredaDashboard.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport api from '../api';\r\n\r\nexport default function WoredaDashboard() {\r\n    const [rows, setRows] = useState([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const reload = async() => {\r\n        setLoading(true);\r\n        try { setRows(await api('/api/requests')); } catch (e) { console.error(e); }\r\n        setLoading(false);\r\n    };\r\n    useEffect(() => { reload(); }, []);\r\n\r\n    const act = async(id, action) => {\r\n        await api(`/api/requests/${id}/status`, { method: 'PUT', body: { action } });\r\n        reload();\r\n    };\r\n    const del = async(id) => {\r\n        await api(`/api/requests/${id}`, { method: 'DELETE' });\r\n        reload();\r\n    };\r\n\r\n    return ( <\r\n        div >\r\n        <\r\n        h2 > Woreda Dashboard < /h2> {\r\n        loading ? 'Loading...' : ( <\r\n            table >\r\n            <\r\n            thead > < tr >\r\n            <\r\n            th > # < /th><th>Farmer</th > < th > Product < /th><th>Qty</th > < th > Kebele < /th><th>Status</th > < th > Action < /th> < /\r\n            tr > < /thead > <\r\n            tbody > {\r\n                rows.map(r => ( <\r\n                        tr key = { r.id } >\r\n                        <\r\n                        td > { r.id } < /td><td>{r.farmer_name}</td > < td > { r.product_name } < /td><td>{r.quantity}</td >\r\n                        <\r\n                        td > { r.kebele_name } < /td><td>{r.status}</td >\r\n                        <\r\n                        td >\r\n                        <\r\n                        label > < input type = \"radio\"\r\n                        name = { `act-${r.id}` }\r\n                        onChange = {\r\n                            () => act(r.id, 'Accept')\r\n                        }\r\n                        /> Accept</label >\r\n                        <\r\n                        label > < input type = \"radio\"\r\n                        name = { `act-${r.id}` }\r\n                        onChange = {\r\n                            () => act(r.id, 'Approve')\r\n                        }\r\n                        /> Approve</label >\r\n                        <\r\n                        label > < input type = \"radio\"\r\n                        name = { `act-${r.id}` }\r\n                        onChange = {\r\n                            () => act(r.id, 'Reject')\r\n                        }\r\n                        /> Reject</label > {\r\n                            r.status === 'Rejected' && < button onClick = {\r\n                                () => del(r.id)\r\n                            } > Delete < /button>} < /\r\n                            td > <\r\n                            /tr>\r\n                        ))\r\n                } <\r\n                /tbody> < /\r\n                table >\r\n            )\r\n        } <\r\n        /div>\r\n    );\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
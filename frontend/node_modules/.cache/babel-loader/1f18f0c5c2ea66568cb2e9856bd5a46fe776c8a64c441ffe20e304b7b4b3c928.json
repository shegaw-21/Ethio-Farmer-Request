{"ast":null,"code":"import React,{useEffect,useState}from'react';import api from'../api';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function RegionDashboard(){const[requests,setRequests]=useState([]);const[loading,setLoading]=useState(true);const reload=async()=>{setLoading(true);try{setRequests(await api('/api/requests'));}catch(e){console.error(e);}setLoading(false);};useEffect(()=>{reload();},[]);const setStatus=async(id,action)=>{await api(\"/api/requests/\".concat(id,\"/status\"),{method:'PUT',body:{action}});reload();};const del=async id=>{await api(\"/api/requests/\".concat(id),{method:'DELETE'});reload();};if(loading)return/*#__PURE__*/_jsx(\"div\",{children:\" Loading... \"});return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\" Region Dashboard \"}),\" \",/*#__PURE__*/_jsx(RequestTable,{rows:requests,onAction:setStatus,onDelete:del}),\" \"]});}function RequestTable(_ref){let{rows,onAction,onDelete}=_ref;return/*#__PURE__*/_jsxs(\"table\",{children:[/*#__PURE__*/_jsxs(\"thead\",{children:[\" \",/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\" # \"}),/*#__PURE__*/_jsx(\"th\",{children:\"Farmer\"}),\" \",/*#__PURE__*/_jsx(\"th\",{children:\" Phone \"}),/*#__PURE__*/_jsx(\"th\",{children:\"Product\"}),\" \",/*#__PURE__*/_jsx(\"th\",{children:\" Qty \"}),\" \",/*#__PURE__*/_jsx(\"th\",{children:\" Zone / Woreda / Kebele \"}),/*#__PURE__*/_jsx(\"th\",{children:\"Status\"}),\" \",/*#__PURE__*/_jsx(\"th\",{children:\" Action \"}),\" \"]}),\" \"]}),\" \",/*#__PURE__*/_jsxs(\"tbody\",{children:[\" \",rows.map(r=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsxs(\"td\",{children:[\" \",r.id,\" \"]}),\" \",/*#__PURE__*/_jsxs(\"td\",{children:[\" \",r.farmer_name,\" \"]}),\" \",/*#__PURE__*/_jsxs(\"td\",{children:[\" \",r.farmer_phone,\" \"]}),\" \",/*#__PURE__*/_jsxs(\"td\",{children:[\" \",r.product_name,\" \"]}),\" \",/*#__PURE__*/_jsxs(\"td\",{children:[\" \",r.quantity,\" \"]}),\" \",/*#__PURE__*/_jsxs(\"td\",{children:[\" \",[r.zone_name,r.woreda_name,r.kebele_name].filter(Boolean).join(' / '),\" \"]}),\" \",/*#__PURE__*/_jsxs(\"td\",{children:[\" \",r.status,\" \"]}),\" \",/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsxs(\"label\",{children:[\" \",/*#__PURE__*/_jsx(\"input\",{type:\"radio\",name:\"act-\".concat(r.id),onChange:()=>onAction(r.id,'Accept')}),\" Accept\"]}),/*#__PURE__*/_jsxs(\"label\",{children:[\" \",/*#__PURE__*/_jsx(\"input\",{type:\"radio\",name:\"act-\".concat(r.id),onChange:()=>onAction(r.id,'Approve')}),\" Approve\"]}),/*#__PURE__*/_jsxs(\"label\",{children:[\" \",/*#__PURE__*/_jsx(\"input\",{type:\"radio\",name:\"act-\".concat(r.id),onChange:()=>onAction(r.id,'Reject')}),\" Reject\"]}),\" \",r.status==='Rejected'&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>onDelete(r.id),children:\" Delete \"}),\" \"]}),\" \"]},r.id)),\" \"]}),\" \"]});}","map":{"version":3,"names":["React","useEffect","useState","api","jsx","_jsx","jsxs","_jsxs","RegionDashboard","requests","setRequests","loading","setLoading","reload","e","console","error","setStatus","id","action","concat","method","body","del","children","RequestTable","rows","onAction","onDelete","_ref","map","r","farmer_name","farmer_phone","product_name","quantity","zone_name","woreda_name","kebele_name","filter","Boolean","join","status","type","name","onChange","onClick"],"sources":["D:/FARMERS/frontend/src/dashboards/RegionDashboard.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport api from '../api';\r\n\r\nexport default function RegionDashboard() {\r\n    const [requests, setRequests] = useState([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const reload = async() => {\r\n        setLoading(true);\r\n        try { setRequests(await api('/api/requests')); } catch (e) { console.error(e); }\r\n        setLoading(false);\r\n    };\r\n    useEffect(() => { reload(); }, []);\r\n\r\n    const setStatus = async(id, action) => {\r\n        await api(`/api/requests/${id}/status`, { method: 'PUT', body: { action } });\r\n        reload();\r\n    };\r\n    const del = async(id) => {\r\n        await api(`/api/requests/${id}`, { method: 'DELETE' });\r\n        reload();\r\n    };\r\n\r\n    if (loading) return <div > Loading... < /div>;\r\n    return ( <\r\n        div >\r\n        <\r\n        h2 > Region Dashboard < /h2> <\r\n        RequestTable rows = { requests }\r\n        onAction = { setStatus }\r\n        onDelete = { del }\r\n        /> < /\r\n        div >\r\n    );\r\n}\r\n\r\nfunction RequestTable({ rows, onAction, onDelete }) {\r\n    return ( <\r\n        table >\r\n        <\r\n        thead > < tr >\r\n        <\r\n        th > # < /th><th>Farmer</th > < th > Phone < /th><th>Product</th > < th > Qty < /th> <\r\n        th > Zone / Woreda / Kebele < /th><th>Status</th > < th > Action < /th> < /\r\n        tr > < /thead > <\r\n        tbody > {\r\n            rows.map(r => ( <\r\n                    tr key = { r.id } >\r\n                    <\r\n                    td > { r.id } < /td> <\r\n                    td > { r.farmer_name } < /td> <\r\n                    td > { r.farmer_phone } < /td> <\r\n                    td > { r.product_name } < /td> <\r\n                    td > { r.quantity } < /td> <\r\n                    td > {\r\n                        [r.zone_name, r.woreda_name, r.kebele_name].filter(Boolean).join(' / ')\r\n                    } < /td> <\r\n                    td > { r.status } < /td> <\r\n                    td >\r\n                    <\r\n                    label > < input type = \"radio\"\r\n                    name = { `act-${r.id}` }\r\n                    onChange = {\r\n                        () => onAction(r.id, 'Accept')\r\n                    }\r\n                    /> Accept</label >\r\n                    <\r\n                    label > < input type = \"radio\"\r\n                    name = { `act-${r.id}` }\r\n                    onChange = {\r\n                        () => onAction(r.id, 'Approve')\r\n                    }\r\n                    /> Approve</label >\r\n                    <\r\n                    label > < input type = \"radio\"\r\n                    name = { `act-${r.id}` }\r\n                    onChange = {\r\n                        () => onAction(r.id, 'Reject')\r\n                    }\r\n                    /> Reject</label > {\r\n                        r.status === 'Rejected' && < button onClick = {\r\n                            () => onDelete(r.id)\r\n                        } > Delete < /button>} < /\r\n                        td > <\r\n                        /tr>\r\n                    ))\r\n            } <\r\n            /tbody> < /\r\n            table >\r\n        );\r\n    }"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"import _objectSpread from\"D:/FARMERS/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{initializeApp}from'firebase/app';import{getAuth,signInWithCustomToken,onAuthStateChanged,signInAnonymously}from'firebase/auth';import{getFirestore,doc,setDoc,getDoc,collection,query,where,onSnapshot,serverTimestamp,addDoc,updateDoc,getDocs,deleteDoc}from'firebase/firestore';import{useForm}from'react-hook-form';import Sidebar from'./components/Sidebar';// Corrected import path with a capital 'S'\nimport'./index.css';// ----------------------\n// Firebase Initialization\n// ----------------------\n// The following global variables are provided by the Canvas environment.\n// For local development, we provide fallback values to avoid compilation errors.\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const appId=typeof __app_id!=='undefined'?__app_id:'default-app-id';const firebaseConfig=typeof __firebase_config!=='undefined'?JSON.parse(__firebase_config):{// You can replace these with your own Firebase project configuration for full functionality\napiKey:\"AIzaSyBh7ErxnKurtNkeK_0PW5XW4joDe_r9Ut4\",authDomain:\"farmers-management-syste-84643.firebaseapp.com\",projectId:\"farmers-management-syste-84643\",storageBucket:\"farmers-management-syste-84643.firebasestorage.app\",messagingSenderId:\"410779424956\",appId:\"1:410779424956:web:b1d26dab35719b1e9a18b9\",measurementId:\"G-RD879ML6B6\"};const initialAuthToken=typeof __initial_auth_token!=='undefined'?__initial_auth_token:'';// Initialize Firebase app and services\nconst app=initializeApp(firebaseConfig);const db=getFirestore(app);const auth=getAuth(app);// ----------------------\n// Constants & Mock Data\n// ----------------------\nconst ADMIN_ROLES={FEDERAL:'Federal',REGION:'Region',ZONE:'Zone',WOREDA:'Woreda',KEBELE:'Kebele'};// The user has requested to keep this constant, but it is not used in this implementation.\nconst ADMIN_ROLES_UNUSED=['admin'];const productTypes=[{id:1,name:'Tractor',department:'Biological Input Supply',description:'Used for plowing'},{id:2,name:'Harvester',department:'Biological Input Supply',description:'Used for harvesting'},{id:3,name:'Fertilizer (DAP)',department:'Chemical Input Supply',description:'Di-ammonium phosphate fertilizer'},{id:4,name:'Pesticide',department:'Chemical Input Supply',description:'Pesticide for crop protection'}];const mockUsers=[{phone:'0912345678',password:'password123',role:ADMIN_ROLES.FEDERAL,fullName:'Federal Admin',location:null,uid:'federal-admin-uid'},{phone:'0987654321',password:'password123',role:ADMIN_ROLES.REGION,fullName:'Oromia Region Admin',location:'Oromia',uid:'oromia-admin-uid'},{phone:'0911223344',password:'password123',role:ADMIN_ROLES.ZONE,fullName:'Arsi Zone Admin',location:'Arsi',uid:'arsi-admin-uid'},{phone:'0933445566',password:'password123',role:ADMIN_ROLES.WOREDA,fullName:'Tiyo Woreda Admin',location:'Tiyo',uid:'tiyo-admin-uid'},{phone:'0955667788',password:'password123',role:ADMIN_ROLES.KEBELE,fullName:'Wendo Kebele Rep',location:'Wendo',uid:'wendo-admin-uid'}];// ----------------------\n// Main App Component\n// ----------------------\nexport default function App(){const[currentUser,setCurrentUser]=useState(null);const[authReady,setAuthReady]=useState(false);const[loading,setLoading]=useState(true);const[requests,setRequests]=useState([]);const[locations,setLocations]=useState({regions:[],zones:[],woredas:[],kebeles:[]});const[allUsers,setAllUsers]=useState([]);const[currentPage,setCurrentPage]=useState('login');const[showModal,setShowModal]=useState(false);const[modalContent,setModalContent]=useState('');const[selectedRequest,setSelectedRequest]=useState(null);const[selectedAdminToEdit,setSelectedAdminToEdit]=useState(null);// Initial Firebase setup and auth state listener\nuseEffect(()=>{const setupFirebase=async()=>{try{// Check if the initialAuthToken exists and is not empty\nif(initialAuthToken){await signInWithCustomToken(auth,initialAuthToken);}else{await signInAnonymously(auth);}}catch(error){console.error(\"Firebase Auth Error:\",error);// Fallback to anonymous sign-in if custom token fails\ntry{await signInAnonymously(auth);}catch(anonError){console.error(\"Anonymous sign-in failed:\",anonError);}}};setupFirebase();const unsubscribeAuth=onAuthStateChanged(auth,user=>{if(user){const userRef=doc(db,'users',user.uid);onSnapshot(userRef,docSnap=>{if(docSnap.exists()){const userData=_objectSpread({id:docSnap.id},docSnap.data());setCurrentUser(userData);}else{// For mock users, we set a default role based on the UID\nconst mockUser=mockUsers.find(u=>u.uid===user.uid);if(mockUser){setCurrentUser(_objectSpread(_objectSpread({},mockUser),{},{id:user.uid}));}else{// If a new anonymous user, set a default role or handle as needed\nsetCurrentUser({id:user.uid,role:'Farmer'});}}setAuthReady(true);},error=>{console.error(\"Error fetching user data:\",error);});}else{setCurrentUser(null);setAuthReady(true);}});return()=>unsubscribeAuth();},[]);// Fetch requests and locations once auth is ready\nuseEffect(()=>{if(!authReady||!currentUser)return;const fetchRequests=()=>{const requestsCollectionRef=collection(db,'requests');let requestsQuery;// Apply filters based on admin level\nif(currentUser.role===ADMIN_ROLES.FEDERAL){requestsQuery=query(requestsCollectionRef);}else if(currentUser.role===ADMIN_ROLES.REGION){requestsQuery=query(requestsCollectionRef,where('location.region','==',currentUser.location));}else if(currentUser.role===ADMIN_ROLES.ZONE){requestsQuery=query(requestsCollectionRef,where('location.zone','==',currentUser.location));}else if(currentUser.role===ADMIN_ROLES.WOREDA){requestsQuery=query(requestsCollectionRef,where('location.woreda','==',currentUser.location));}else if(currentUser.role===ADMIN_ROLES.KEBELE){requestsQuery=query(requestsCollectionRef,where('location.kebele','==',currentUser.location));}else{requestsQuery=query(requestsCollectionRef,where('requesterId','==',currentUser.id));}const unsubscribeRequests=onSnapshot(requestsQuery,snapshot=>{const fetchedRequests=snapshot.docs.map(doc=>_objectSpread({id:doc.id},doc.data()));// Corrected the sorting logic to avoid the syntax error\nconst sortedRequests=fetchedRequests.sort((a,b)=>{const timeA=a.timestamp&&a.timestamp.seconds||0;const timeB=b.timestamp&&b.timestamp.seconds||0;return timeB-timeA;});setRequests(sortedRequests);},error=>{console.error(\"Error fetching requests:\",error);});return unsubscribeRequests;};const fetchLocations=async()=>{const fetchedRegions=await getDocs(collection(db,'locations_regions')).then(s=>s.docs.map(d=>d.data().name));const fetchedZones=await getDocs(collection(db,'locations_zones')).then(s=>s.docs.map(d=>d.data().name));const fetchedWoredas=await getDocs(collection(db,'locations_woredas')).then(s=>s.docs.map(d=>d.data().name));const fetchedKebeles=await getDocs(collection(db,'locations_kebeles')).then(s=>s.docs.map(d=>d.data().name));setLocations({regions:fetchedRegions,zones:fetchedZones,woredas:fetchedWoredas,kebeles:fetchedKebeles});};const fetchUsers=async()=>{const usersCollectionRef=collection(db,'users');let usersQuery;if(currentUser.role===ADMIN_ROLES.FEDERAL){usersQuery=query(usersCollectionRef,where('role','!=',ADMIN_ROLES.FEDERAL));}else if(currentUser.role===ADMIN_ROLES.REGION){usersQuery=query(usersCollectionRef,where('role','==',ADMIN_ROLES.ZONE),where('location','==',currentUser.location));}else if(currentUser.role===ADMIN_ROLES.ZONE){usersQuery=query(usersCollectionRef,where('role','==',ADMIN_ROLES.WOREDA),where('location','==',currentUser.location));}else if(currentUser.role===ADMIN_ROLES.WOREDA){usersQuery=query(usersCollectionRef,where('role','==',ADMIN_ROLES.KEBELE),where('location','==',currentUser.location));}else{usersQuery=query(usersCollectionRef,where('role','==','Farmer'));}const unsubscribeUsers=onSnapshot(usersQuery,snapshot=>{const fetchedUsers=snapshot.docs.map(doc=>_objectSpread({id:doc.id},doc.data()));setAllUsers(fetchedUsers);},error=>{console.error(\"Error fetching users:\",error);});return unsubscribeUsers;};const unsubscribeRequests=fetchRequests();fetchLocations();const unsubscribeUsers=fetchUsers();setLoading(false);return()=>{unsubscribeRequests();unsubscribeUsers();};},[authReady,currentUser]);// Helper functions for UI and state management\nconst showMessage=message=>{setModalContent(message);setShowModal(true);};const handleLogout=async()=>{await auth.signOut();setCurrentUser(null);setCurrentPage('login');};const handleLogin=async(phone,password)=>{const mockUser=mockUsers.find(u=>u.phone===phone&&u.password===password);if(mockUser){// Simulate login by signing in with the user's custom UID\ntry{const customToken=mockUser.uid;// In a real app, this would be a real custom token\nawait signInWithCustomToken(auth,customToken);showMessage(\"Welcome, \".concat(mockUser.fullName,\"!\"));setCurrentPage('dashboard');}catch(error){console.error(\"Login failed:\",error);showMessage(\"Login failed. Please check your credentials.\");}}else{showMessage(\"Invalid phone number or password.\");}};const handleRequestAction=async(requestId,newStatus,feedback)=>{if(!currentUser){showMessage(\"You must be logged in to perform this action.\");return;}try{const requestRef=doc(db,'requests',requestId);const requestSnapshot=await getDoc(requestRef);if(!requestSnapshot.exists()){showMessage(\"Request not found.\");return;}const existingApprovals=requestSnapshot.data().approvals||{};const newApprovals=_objectSpread(_objectSpread({},existingApprovals),{},{[currentUser.role.toLowerCase()]:{status:newStatus,by:currentUser.fullName,uid:currentUser.id,feedback:feedback||null,timestamp:serverTimestamp()}});await updateDoc(requestRef,{status:newStatus,// Update overall status to the latest approval\napprovals:newApprovals});showMessage(\"Request \".concat(requestId,\" has been \").concat(newStatus,\".\"));setSelectedRequest(null);// Close the form\n}catch(error){console.error(\"Error updating request:\",error);showMessage(\"Failed to update request status. Please try again.\");}};// Components for different views\nconst MainDashboard=()=>{const statusCounts=requests.reduce((acc,req)=>{acc[req.status]=(acc[req.status]||0)+1;return acc;},{});return/*#__PURE__*/_jsxs(\"div\",{className:\"p-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-6 mb-8\",children:[/*#__PURE__*/_jsx(DashboardCard,{title:\"Total Requests\",count:requests.length,icon:\"\\uD83D\\uDCE6\"}),/*#__PURE__*/_jsx(DashboardCard,{title:\"Approved\",count:statusCounts['Approved']||0,icon:\"\\u2705\"}),/*#__PURE__*/_jsx(DashboardCard,{title:\"Pending\",count:statusCounts['Pending']||0,icon:\"\\uD83D\\uDD52\"}),/*#__PURE__*/_jsx(DashboardCard,{title:\"Rejected\",count:statusCounts['Rejected']||0,icon:\"\\u274C\"}),/*#__PURE__*/_jsx(DashboardCard,{title:\"Delivered\",count:statusCounts['Delivered']||0,icon:\"\\uD83D\\uDE9A\"})]}),\" \",/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold mb-4\",children:\" Product Requests Table View \"}),\" \",/*#__PURE__*/_jsx(RequestsTable,{})]});};const RequestsTable=()=>{return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-xl shadow-lg\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"overflow-x-auto\",children:[/*#__PURE__*/_jsxs(\"table\",{className:\"min-w-full text-left\",children:[/*#__PURE__*/_jsxs(\"thead\",{children:[/*#__PURE__*/_jsxs(\"tr\",{className:\"bg-gray-100 text-gray-600 uppercase text-sm leading-normal\",children:[/*#__PURE__*/_jsx(\"th\",{className:\"py-3 px-6 text-left\",children:\" Request ID \"}),\" \",/*#__PURE__*/_jsx(\"th\",{className:\"py-3 px-6 text-left\",children:\" Requester \"}),\" \",/*#__PURE__*/_jsx(\"th\",{className:\"py-3 px-6 text-left\",children:\" Product \"}),\" \",/*#__PURE__*/_jsx(\"th\",{className:\"py-3 px-6 text-left\",children:\" Location \"}),\" \",/*#__PURE__*/_jsx(\"th\",{className:\"py-3 px-6 text-left\",children:\" Status \"}),\" \",/*#__PURE__*/_jsx(\"th\",{className:\"py-3 px-6 text-center\",children:\" Actions \"}),\" \"]}),\" \"]}),\" \",/*#__PURE__*/_jsxs(\"tbody\",{className:\"text-gray-600 text-sm font-light\",children:[\" \",requests.length>0?requests.map(req=>/*#__PURE__*/_jsxs(\"tr\",{className:\"border-b border-gray-200 hover:bg-gray-50\",children:[/*#__PURE__*/_jsxs(\"td\",{className:\"py-3 px-6 text-left whitespace-nowrap\",children:[\" \",req.id,\" \"]}),\" \",/*#__PURE__*/_jsxs(\"td\",{className:\"py-3 px-6 text-left\",children:[\" \",req.requesterName,\" \"]}),\" \",/*#__PURE__*/_jsxs(\"td\",{className:\"py-3 px-6 text-left\",children:[\" \",req.productType,\" \"]}),\" \",/*#__PURE__*/_jsxs(\"td\",{className:\"py-3 px-6 text-left\",children:[\" \",req.location&&req.location.region,\" & gt; \",req.location&&req.location.zone,\" & gt; \",req.location&&req.location.woreda,\" & gt; \",req.location&&req.location.kebele,\" \"]}),\" \",/*#__PURE__*/_jsxs(\"td\",{className:\"py-3 px-6 text-left\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"py-1 px-3 rounded-full text-xs font-semibold \".concat(req.status==='Approved'?'bg-green-200 text-green-600':req.status==='Pending'?'bg-yellow-200 text-yellow-600':'bg-red-200 text-red-600'),children:[\" \",req.status,\" \"]}),\" \"]}),\" \",/*#__PURE__*/_jsxs(\"td\",{className:\"py-3 px-6 text-center\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setSelectedRequest(req),className:\"bg-blue-500 text-white p-2 rounded-lg hover:bg-blue-600 transition-colors\",children:\" \\uD83D\\uDC41View \"}),\" \"]}),\" \"]},req.id)):/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{colSpan:\"6\",className:\"text-center py-4 text-gray-500\",children:\" No requests found. \"}),\" \"]}),\" \"]}),\" \"]}),\" \"]}),\" \"]});};const RequestApprovalForm=_ref=>{let{request,onClose}=_ref;const{register,handleSubmit}=useForm();const onSubmit=data=>{const newStatus=data.action==='approve'?'Approved':'Rejected';handleRequestAction(request.id,newStatus,data.feedback);onClose();};const canApprove=()=>{if(!currentUser)return false;const userRole=currentUser.role.toLowerCase();const approvals=request.approvals||{};// Check if the current user has already approved\nif(approvals[userRole]&&(approvals[userRole].status==='Approved'||approvals[userRole].status==='Rejected')){return false;}// Allow approval if the previous level has approved (or if it's the lowest level)\nif(userRole==='kebele'){return true;}if(userRole==='woreda'&&approvals.kebele&&approvals.kebele.status==='Approved'){return true;}if(userRole==='zone'&&approvals.woreda&&approvals.woreda.status==='Approved'){return true;}if(userRole==='region'&&approvals.zone&&approvals.zone.status==='Approved'){return true;}if(userRole==='federal'&&approvals.region&&approvals.region.status==='Approved'){return true;}return false;};return/*#__PURE__*/_jsxs(Modal,{show:true,onClose:onClose,title:\"Request Approval for \".concat(request.id),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-100 p-4 rounded-lg mb-4\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-bold text-lg mb-2\",children:\" Request Details \"}),\" \",/*#__PURE__*/_jsxs(\"p\",{children:[\" \",/*#__PURE__*/_jsx(\"strong\",{children:\" Requested By: \"}),\" \",request.requesterName]}),/*#__PURE__*/_jsxs(\"p\",{children:[\" \",/*#__PURE__*/_jsx(\"strong\",{children:\" Product Type: \"}),\" \",request.productType]}),/*#__PURE__*/_jsxs(\"p\",{children:[\" \",/*#__PURE__*/_jsx(\"strong\",{children:\" Amount: \"}),\" \",request.amount]}),/*#__PURE__*/_jsxs(\"p\",{children:[\" \",/*#__PURE__*/_jsx(\"strong\",{children:\" Purpose: \"}),\" \",request.purpose]}),/*#__PURE__*/_jsxs(\"p\",{children:[\" \",/*#__PURE__*/_jsx(\"strong\",{children:\" Location: \"}),\" \",request.location&&request.location.region,\" > \",request.location&&request.location.zone,\" > \",request.location&&request.location.woreda,\" > \",request.location&&request.location.kebele]}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-2 font-bold\",children:\" Previous Approvals: \"}),\" \",request.approvals&&Object.keys(request.approvals).length>0?Object.entries(request.approvals).map(_ref2=>{let[role,approval]=_ref2;return/*#__PURE__*/_jsxs(\"p\",{children:[\"-\",role,\": \",/*#__PURE__*/_jsxs(\"span\",{className:\"font-semibold \".concat(approval.status==='Approved'?'text-green-600':'text-red-600'),children:[\" \",approval.status,\" \"]}),\" by \",approval.by,\" \"]},role);}):/*#__PURE__*/_jsx(\"p\",{children:\" -No previous approvals. \"}),\" \"]}),\" \",canApprove()?/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit(onSubmit),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"inline-flex items-center mr-4\",children:[/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({type:\"radio\"},register(\"action\",{required:true})),{},{value:\"approve\",className:\"form-radio text-green-500\"})),/*#__PURE__*/_jsx(\"span\",{className:\"ml-2\",children:\" Approve \"}),\" \"]}),\" \",/*#__PURE__*/_jsxs(\"label\",{className:\"inline-flex items-center\",children:[/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({type:\"radio\"},register(\"action\",{required:true})),{},{value:\"reject\",className:\"form-radio text-red-500\"})),/*#__PURE__*/_jsx(\"span\",{className:\"ml-2\",children:\" Reject \"}),\" \"]}),\" \"]}),\" \",/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 font-bold mb-2\",children:\" Feedback \"}),\" \",/*#__PURE__*/_jsx(\"textarea\",_objectSpread(_objectSpread({},register(\"feedback\")),{},{rows:\"3\",className:\"w-full p-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\",placeholder:\"Add optional feedback...\"})),\" \"]}),\" \",/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"w-full bg-blue-500 text-white p-3 rounded-lg hover:bg-blue-600 transition-colors\",children:\"Submit Decision \"}),\" \"]}):/*#__PURE__*/_jsx(\"div\",{className:\"bg-yellow-100 p-4 rounded-lg text-yellow-800\",children:\"You cannot approve or reject this request at this time. \"}),\" \"]}),\" \"]});};const MasterData=()=>{const[productData,setProductData]=useState([]);const[showAddUserModal,setShowAddUserModal]=useState(false);const[showAddProductModal,setShowAddProductModal]=useState(false);// Fetch products from Firestore\nuseEffect(()=>{const productsRef=collection(db,'products');const unsubscribe=onSnapshot(productsRef,snapshot=>{const fetchedProducts=snapshot.docs.map(doc=>_objectSpread({id:doc.id},doc.data()));setProductData(fetchedProducts);});return unsubscribe;},[]);const isFederalAdmin=currentUser&&currentUser.role===ADMIN_ROLES.FEDERAL;const canCreateAdmin=adminRole=>{if(currentUser&&currentUser.role===ADMIN_ROLES.FEDERAL&&adminRole===ADMIN_ROLES.REGION)return true;if(currentUser&&currentUser.role===ADMIN_ROLES.REGION&&adminRole===ADMIN_ROLES.ZONE)return true;if(currentUser&&currentUser.role===ADMIN_ROLES.ZONE&&adminRole===ADMIN_ROLES.WOREDA)return true;if(currentUser&&currentUser.role===ADMIN_ROLES.WOREDA&&adminRole===ADMIN_ROLES.KEBELE)return true;return false;};const handleAddProduct=async data=>{try{await addDoc(collection(db,'products'),_objectSpread(_objectSpread({},data),{},{timestamp:serverTimestamp()}));showMessage(\"Product added successfully!\");setShowAddProductModal(false);}catch(error){console.error(\"Error adding product:\",error);showMessage(\"Failed to add product. Try again.\");}};const handleEditProduct=async(productId,data)=>{try{await updateDoc(doc(db,'products',productId),_objectSpread({},data));showMessage(\"Product updated successfully!\");}catch(error){console.error(\"Error updating product:\",error);showMessage(\"Failed to update product. Try again.\");}};const handleDeleteProduct=async productId=>{try{await deleteDoc(doc(db,'products',productId));showMessage(\"Product deleted successfully!\");}catch(error){console.error(\"Error deleting product:\",error);showMessage(\"Failed to delete product. Try again.\");}};const handleAddUser=async data=>{try{const newUserRef=doc(collection(db,'users'));const newUserId=newUserRef.id;await setDoc(newUserRef,_objectSpread(_objectSpread({},data),{},{uid:newUserId,timestamp:serverTimestamp()}));showMessage(\"New \".concat(data.role,\" admin created! Their ID is \").concat(newUserId));setShowAddUserModal(false);}catch(error){console.error(\"Error adding user:\",error);showMessage(\"Failed to add user. Try again.\");}};return/*#__PURE__*/_jsxs(\"div\",{className:\"p-8\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold mb-4\",children:\" Master Data Management \"}),\" \",/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-xl shadow-lg mb-8\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-bold text-xl mb-4\",children:\" Admin Users \"}),\" \",canCreateAdmin(ADMIN_ROLES.REGION)&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowAddUserModal(true),className:\"bg-green-500 text-white p-3 rounded-lg hover:bg-green-600 transition-colors mb-4\",children:\"+Add Regional Admin \"}),\" \",canCreateAdmin(ADMIN_ROLES.ZONE)&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowAddUserModal(true),className:\"bg-green-500 text-white p-3 rounded-lg hover:bg-green-600 transition-colors mb-4\",children:\"+Add Zonal Admin \"}),\" \",canCreateAdmin(ADMIN_ROLES.WOREDA)&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowAddUserModal(true),className:\"bg-green-500 text-white p-3 rounded-lg hover:bg-green-600 transition-colors mb-4\",children:\"+Add Woreda Admin \"}),\" \",canCreateAdmin(ADMIN_ROLES.KEBELE)&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowAddUserModal(true),className:\"bg-green-500 text-white p-3 rounded-lg hover:bg-green-600 transition-colors mb-4\",children:\"+Add Kebele Rep \"}),\" \",/*#__PURE__*/_jsxs(\"div\",{className:\"overflow-x-auto\",children:[/*#__PURE__*/_jsxs(\"table\",{className:\"min-w-full text-left\",children:[/*#__PURE__*/_jsxs(\"thead\",{children:[/*#__PURE__*/_jsxs(\"tr\",{className:\"bg-gray-100 text-gray-600 uppercase text-sm leading-normal\",children:[/*#__PURE__*/_jsx(\"th\",{className:\"py-3 px-6 text-left\",children:\" Full Name \"}),\" \",/*#__PURE__*/_jsx(\"th\",{className:\"py-3 px-6 text-left\",children:\" Phone \"}),\" \",/*#__PURE__*/_jsx(\"th\",{className:\"py-3 px-6 text-left\",children:\" Role \"}),\" \",/*#__PURE__*/_jsx(\"th\",{className:\"py-3 px-6 text-left\",children:\" Location \"}),\" \",/*#__PURE__*/_jsx(\"th\",{className:\"py-3 px-6 text-center\",children:\" Actions \"}),\" \"]}),\" \"]}),\" \",/*#__PURE__*/_jsxs(\"tbody\",{className:\"text-gray-600 text-sm font-light\",children:[\" \",allUsers.map(user=>/*#__PURE__*/_jsxs(\"tr\",{className:\"border-b border-gray-200 hover:bg-gray-50\",children:[/*#__PURE__*/_jsxs(\"td\",{className:\"py-3 px-6\",children:[\" \",user.fullName,\" \"]}),\" \",/*#__PURE__*/_jsxs(\"td\",{className:\"py-3 px-6\",children:[\" \",user.phone,\" \"]}),\" \",/*#__PURE__*/_jsxs(\"td\",{className:\"py-3 px-6\",children:[\" \",user.role,\" \"]}),\" \",/*#__PURE__*/_jsxs(\"td\",{className:\"py-3 px-6\",children:[\" \",user.location,\" \"]}),\" \",/*#__PURE__*/_jsxs(\"td\",{className:\"py-3 px-6 text-center\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setSelectedAdminToEdit(user),className:\"bg-yellow-500 text-white p-2 rounded-lg hover:bg-yellow-600 transition-colors mr-2\",children:\" \\u270F\\uFE0FEdit \"}),\" \",/*#__PURE__*/_jsx(\"button\",{onClick:()=>{},className:\"bg-red-500 text-white p-2 rounded-lg hover:bg-red-600 transition-colors\",children:\" \\uD83D\\uDDD1Delete \"}),\" \"]}),\" \"]},user.id)),\" \"]}),\" \"]}),\" \"]}),\" \"]}),\" \",showAddUserModal&&/*#__PURE__*/_jsx(AddUserModal,{onClose:()=>setShowAddUserModal(false),onSubmit:handleAddUser,currentUser:currentUser}),\" \",/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-xl shadow-lg mb-8\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-bold text-xl mb-4\",children:\" Product Types \"}),\" \",isFederalAdmin&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowAddProductModal(true),className:\"bg-green-500 text-white p-3 rounded-lg hover:bg-green-600 transition-colors mb-4\",children:\"+Add product Type \"}),\" \",/*#__PURE__*/_jsxs(\"div\",{className:\"overflow-x-auto\",children:[/*#__PURE__*/_jsxs(\"table\",{className:\"min-w-full text-left\",children:[/*#__PURE__*/_jsxs(\"thead\",{children:[/*#__PURE__*/_jsxs(\"tr\",{className:\"bg-gray-100 text-gray-600 uppercase text-sm leading-normal\",children:[/*#__PURE__*/_jsx(\"th\",{className:\"py-3 px-6 text-left\",children:\" ID \"}),\" \",/*#__PURE__*/_jsx(\"th\",{className:\"py-3 px-6 text-left\",children:\" Name \"}),\" \",/*#__PURE__*/_jsx(\"th\",{className:\"py-3 px-6 text-left\",children:\" Department \"}),\" \",/*#__PURE__*/_jsx(\"th\",{className:\"py-3 px-6 text-left\",children:\" Description \"}),\" \",/*#__PURE__*/_jsx(\"th\",{className:\"py-3 px-6 text-center\",children:\" Actions \"}),\" \"]}),\" \"]}),\" \",/*#__PURE__*/_jsxs(\"tbody\",{className:\"text-gray-600 text-sm font-light\",children:[\" \",productData.map(prod=>/*#__PURE__*/_jsxs(\"tr\",{className:\"border-b border-gray-200 hover:bg-gray-50\",children:[/*#__PURE__*/_jsxs(\"td\",{className:\"py-3 px-6\",children:[\" \",prod.id,\" \"]}),\" \",/*#__PURE__*/_jsxs(\"td\",{className:\"py-3 px-6\",children:[\" \",prod.name,\" \"]}),\" \",/*#__PURE__*/_jsxs(\"td\",{className:\"py-3 px-6\",children:[\" \",prod.department,\" \"]}),\" \",/*#__PURE__*/_jsxs(\"td\",{className:\"py-3 px-6\",children:[\" \",prod.description,\" \"]}),\" \",/*#__PURE__*/_jsxs(\"td\",{className:\"py-3 px-6 text-center\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>{},className:\"bg-yellow-500 text-white p-2 rounded-lg hover:bg-yellow-600 transition-colors mr-2\",children:\" \\u270F\\uFE0FEdit \"}),\" \",isFederalAdmin&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDeleteProduct(prod.id),className:\"bg-red-500 text-white p-2 rounded-lg hover:bg-red-600 transition-colors\",children:\" \\uD83D\\uDDD1Delete \"}),\" \"]}),\" \"]},prod.id)),\" \"]}),\" \"]}),\" \"]}),\" \"]}),\" \",showAddProductModal&&/*#__PURE__*/_jsx(AddProductModal,{onClose:()=>setShowAddProductModal(false),onSubmit:handleAddProduct}),\" \"]});};const AddUserModal=_ref3=>{let{onClose,onSubmit,currentUser}=_ref3;const{register,handleSubmit,formState:{errors}}=useForm();const getNextRole=()=>{if(currentUser&&currentUser.role===ADMIN_ROLES.FEDERAL)return ADMIN_ROLES.REGION;if(currentUser&&currentUser.role===ADMIN_ROLES.REGION)return ADMIN_ROLES.ZONE;if(currentUser&&currentUser.role===ADMIN_ROLES.ZONE)return ADMIN_ROLES.WOREDA;if(currentUser&&currentUser.role===ADMIN_ROLES.WOREDA)return ADMIN_ROLES.KEBELE;return'Farmer';};const getNextLocations=()=>{if(currentUser&&currentUser.role===ADMIN_ROLES.FEDERAL)return locations.regions;if(currentUser&&currentUser.role===ADMIN_ROLES.REGION)return locations.zones.filter(z=>z.parent===currentUser.location);if(currentUser&&currentUser.role===ADMIN_ROLES.ZONE)return locations.woredas.filter(w=>w.parent===currentUser.location);if(currentUser&&currentUser.role===ADMIN_ROLES.WOREDA)return locations.kebeles.filter(k=>k.parent===currentUser.location);return[];};const nextRole=getNextRole();const nextLocations=getNextLocations();return/*#__PURE__*/_jsxs(Modal,{show:true,onClose:onClose,title:\"Add New \".concat(nextRole,\" Admin\"),children:[/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit(onSubmit),className:\"p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 font-bold mb-2\",children:\" Full Name \"}),\" \",/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({},register(\"fullName\",{required:\"Full name is required\"})),{},{className:\"w-full p-2 border rounded-lg\",type:\"text\"})),errors.fullName&&/*#__PURE__*/_jsxs(\"p\",{className:\"text-red-500 text-sm mt-1\",children:[\" \",errors.fullName.message,\" \"]}),\" \"]}),\" \",/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 font-bold mb-2\",children:\" Phone Number \"}),\" \",/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({},register(\"phone\",{required:\"Phone number is required\"})),{},{className:\"w-full p-2 border rounded-lg\",type:\"tel\"})),errors.phone&&/*#__PURE__*/_jsxs(\"p\",{className:\"text-red-500 text-sm mt-1\",children:[\" \",errors.phone.message,\" \"]}),\" \"]}),\" \",/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 font-bold mb-2\",children:\" Password \"}),\" \",/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({},register(\"password\",{required:\"Password is required\"})),{},{className:\"w-full p-2 border rounded-lg\",type:\"password\"})),errors.password&&/*#__PURE__*/_jsxs(\"p\",{className:\"text-red-500 text-sm mt-1\",children:[\" \",errors.password.message,\" \"]}),\" \"]}),\" \",/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 font-bold mb-2\",children:\" Location \"}),\" \",/*#__PURE__*/_jsxs(\"select\",_objectSpread(_objectSpread({},register(\"location\",{required:\"Location is required\"})),{},{className:\"w-full p-2 border rounded-lg\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\" Select a location \"}),\" \",nextLocations.map(loc=>/*#__PURE__*/_jsxs(\"option\",{value:loc,children:[\" \",loc,\" \"]},loc)),\" \"]})),\" \",errors.location&&/*#__PURE__*/_jsxs(\"p\",{className:\"text-red-500 text-sm mt-1\",children:[\" \",errors.location.message,\" \"]}),\" \"]}),\" \",/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({type:\"hidden\"},register(\"role\")),{},{value:nextRole})),\" \",/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"w-full bg-blue-500 text-white p-3 rounded-lg hover:bg-blue-600 transition-colors\",children:\"Add User \"}),\" \"]}),\" \"]});};const AddProductModal=_ref4=>{let{onClose,onSubmit}=_ref4;const{register,handleSubmit,formState:{errors}}=useForm();return/*#__PURE__*/_jsxs(Modal,{show:true,onClose:onClose,title:\"Add New Product\",children:[/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit(onSubmit),className:\"p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 font-bold mb-2\",children:\" Product Name \"}),\" \",/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({},register(\"name\",{required:\"Product name is required\"})),{},{className:\"w-full p-2 border rounded-lg\",type:\"text\"})),errors.name&&/*#__PURE__*/_jsxs(\"p\",{className:\"text-red-500 text-sm mt-1\",children:[\" \",errors.name.message,\" \"]}),\" \"]}),\" \",/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 font-bold mb-2\",children:\" Department \"}),\" \",/*#__PURE__*/_jsxs(\"select\",_objectSpread(_objectSpread({},register(\"department\",{required:\"Department is required\"})),{},{className:\"w-full p-2 border rounded-lg\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\" Select Department \"}),\" \",/*#__PURE__*/_jsx(\"option\",{value:\"Biological Input Supply\",children:\" Biological Input Supply \"}),\" \",/*#__PURE__*/_jsx(\"option\",{value:\"Chemical Input Supply\",children:\" Chemical Input Supply \"}),\" \"]})),\" \",errors.department&&/*#__PURE__*/_jsxs(\"p\",{className:\"text-red-500 text-sm mt-1\",children:[\" \",errors.department.message,\" \"]}),\" \"]}),\" \",/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 font-bold mb-2\",children:\" Description \"}),\" \",/*#__PURE__*/_jsx(\"textarea\",_objectSpread(_objectSpread({},register(\"description\")),{},{rows:\"3\",className:\"w-full p-2 border rounded-lg\"})),\" \"]}),\" \",/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"w-full bg-blue-500 text-white p-3 rounded-lg hover:bg-blue-600 transition-colors\",children:\"Add Product \"}),\" \"]}),\" \"]});};const Reports=()=>{return/*#__PURE__*/_jsxs(\"div\",{className:\"p-8\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold mb-4\",children:\" Reports \"}),\" \",/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-xl shadow-lg\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-bold text-xl mb-4\",children:\" Requests by Region \"}),\" \",/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500\",children:\" [Bar Chart: A placeholder for a bar chart showing requests by region ] \"}),\" \"]}),\" \",/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-xl shadow-lg\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-bold text-xl mb-4\",children:\" Product Type Usage \"}),\" \",/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500\",children:\" [Pie Chart: A placeholder for a pie chart showing product type usage ] \"}),\" \"]}),\" \"]}),\" \"]});};const DashboardCard=_ref5=>{let{title,count,icon}=_ref5;return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-xl shadow-lg flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-xl font-semibold text-gray-500\",children:[\" \",title,\" \"]}),\" \",/*#__PURE__*/_jsxs(\"p\",{className:\"text-4xl font-bold text-gray-800\",children:[\" \",count,\" \"]}),\" \"]}),\" \",/*#__PURE__*/_jsxs(\"div\",{className:\"text-5xl text-blue-500\",children:[\" \",icon,\" \"]}),\" \"]});};const Modal=_ref6=>{let{show,onClose,title,message,children}=_ref6;if(!show)return null;return/*#__PURE__*/_jsxs(\"div\",{className:\"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center p-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-xl shadow-2xl w-full max-w-md\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center p-4 border-b\",children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"text-xl font-bold\",children:[\" \",title,\" \"]}),\" \",/*#__PURE__*/_jsx(\"button\",{onClick:onClose,className:\"text-gray-500 hover:text-gray-800 text-2xl leading-none\",children:\" & times; \"}),\" \"]}),\" \",/*#__PURE__*/_jsxs(\"div\",{className:\"p-4\",children:[\" \",message&&/*#__PURE__*/_jsxs(\"p\",{className:\"mb-4 text-gray-700\",children:[\" \",message,\" \"]}),\" \",children,\" \"]}),\" \"]}),\" \"]});};const LoginScreen=()=>{const{register,handleSubmit,formState:{errors}}=useForm();const onSubmit=data=>{handleLogin(data.phone,data.password);};return/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-center min-h-screen bg-gray-100 p-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-8 rounded-xl shadow-2xl w-full max-w-sm\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-3xl font-bold text-center mb-6\",children:\" Admin Login \"}),\" \",/*#__PURE__*/_jsx(\"p\",{className:\"text-center text-gray-500 mb-6\",children:\" Use one of the mock credentials to log in . \"}),\" \",/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit(onSubmit),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 font-bold mb-2\",children:\" Phone Number \"}),\" \",/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({},register(\"phone\",{required:\"Phone number is required\"})),{},{className:\"w-full p-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\",type:\"tel\",placeholder:\"e.g. 0912345678\"})),errors.phone&&/*#__PURE__*/_jsxs(\"p\",{className:\"text-red-500 text-sm mt-1\",children:[\" \",errors.phone.message,\" \"]}),\" \"]}),\" \",/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 font-bold mb-2\",children:\" Password \"}),\" \",/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({},register(\"password\",{required:\"Password is required\"})),{},{className:\"w-full p-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\",type:\"password\",placeholder:\"password123\"})),errors.password&&/*#__PURE__*/_jsxs(\"p\",{className:\"text-red-500 text-sm mt-1\",children:[\" \",errors.password.message,\" \"]}),\" \"]}),\" \",/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"w-full bg-blue-500 text-white p-3 rounded-lg font-bold hover:bg-blue-600 transition-colors\",children:\"Login \"}),\" \"]}),\" \"]}),\" \"]});};if(loading||!authReady){return/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center min-h-screen text-2xl font-semibold\",children:\" Loading... \"});}if(!currentUser||currentPage==='login'){return/*#__PURE__*/_jsx(LoginScreen,{});}return/*#__PURE__*/_jsxs(\"div\",{className:\"flex min-h-screen bg-gray-100 font-inter\",children:[/*#__PURE__*/_jsx(Sidebar,{currentPage:currentPage,setCurrentPage:setCurrentPage,currentUser:currentUser}),\" \",/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 flex flex-col\",children:[/*#__PURE__*/_jsxs(\"header\",{className:\"bg-white shadow-md p-4 flex justify-between items-center\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold text-gray-800\",children:\" product Request Management System \"}),\" \",/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-4\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"text-gray-700\",children:[\" \\uD83D\\uDC64\",currentUser.fullName,\"(\",currentUser.role,\") \"]}),\" \",/*#__PURE__*/_jsx(\"button\",{onClick:handleLogout,className:\"bg-red-500 text-white p-2 rounded-lg hover:bg-red-600 transition-colors\",children:\" Logout \"}),\" \"]}),\" \"]}),\" \",/*#__PURE__*/_jsxs(\"main\",{className:\"flex-1 overflow-auto\",children:[\" \",currentPage==='dashboard'&&/*#__PURE__*/_jsx(MainDashboard,{}),\" \",currentPage==='master-data'&&/*#__PURE__*/_jsx(MasterData,{}),\" \",currentPage==='reports'&&/*#__PURE__*/_jsx(Reports,{}),\" \",selectedRequest&&/*#__PURE__*/_jsx(RequestApprovalForm,{request:selectedRequest,onClose:()=>setSelectedRequest(null)}),\" \"]}),\" \"]}),\" \",/*#__PURE__*/_jsx(Modal,{show:showModal,onClose:()=>setShowModal(false),title:\"Notification\",message:modalContent}),\" \"]});}","map":{"version":3,"names":["React","useState","useEffect","initializeApp","getAuth","signInWithCustomToken","onAuthStateChanged","signInAnonymously","getFirestore","doc","setDoc","getDoc","collection","query","where","onSnapshot","serverTimestamp","addDoc","updateDoc","getDocs","deleteDoc","useForm","Sidebar","jsx","_jsx","jsxs","_jsxs","appId","__app_id","firebaseConfig","__firebase_config","JSON","parse","apiKey","authDomain","projectId","storageBucket","messagingSenderId","measurementId","initialAuthToken","__initial_auth_token","app","db","auth","ADMIN_ROLES","FEDERAL","REGION","ZONE","WOREDA","KEBELE","ADMIN_ROLES_UNUSED","productTypes","id","name","department","description","mockUsers","phone","password","role","fullName","location","uid","App","currentUser","setCurrentUser","authReady","setAuthReady","loading","setLoading","requests","setRequests","locations","setLocations","regions","zones","woredas","kebeles","allUsers","setAllUsers","currentPage","setCurrentPage","showModal","setShowModal","modalContent","setModalContent","selectedRequest","setSelectedRequest","selectedAdminToEdit","setSelectedAdminToEdit","setupFirebase","error","console","anonError","unsubscribeAuth","user","userRef","docSnap","exists","userData","_objectSpread","data","mockUser","find","u","fetchRequests","requestsCollectionRef","requestsQuery","unsubscribeRequests","snapshot","fetchedRequests","docs","map","sortedRequests","sort","a","b","timeA","timestamp","seconds","timeB","fetchLocations","fetchedRegions","then","s","d","fetchedZones","fetchedWoredas","fetchedKebeles","fetchUsers","usersCollectionRef","usersQuery","unsubscribeUsers","fetchedUsers","showMessage","message","handleLogout","signOut","handleLogin","customToken","concat","handleRequestAction","requestId","newStatus","feedback","requestRef","requestSnapshot","existingApprovals","approvals","newApprovals","toLowerCase","status","by","MainDashboard","statusCounts","reduce","acc","req","className","children","DashboardCard","title","count","length","icon","RequestsTable","requesterName","productType","region","zone","woreda","kebele","onClick","colSpan","RequestApprovalForm","_ref","request","onClose","register","handleSubmit","onSubmit","action","canApprove","userRole","Modal","show","amount","purpose","Object","keys","entries","_ref2","approval","type","required","value","rows","placeholder","MasterData","productData","setProductData","showAddUserModal","setShowAddUserModal","showAddProductModal","setShowAddProductModal","productsRef","unsubscribe","fetchedProducts","isFederalAdmin","canCreateAdmin","adminRole","handleAddProduct","handleEditProduct","productId","handleDeleteProduct","handleAddUser","newUserRef","newUserId","AddUserModal","prod","AddProductModal","_ref3","formState","errors","getNextRole","getNextLocations","filter","z","parent","w","k","nextRole","nextLocations","loc","_ref4","Reports","_ref5","_ref6","LoginScreen"],"sources":["D:/FARMERS/frontend/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { initializeApp } from 'firebase/app';\r\nimport { getAuth, signInWithCustomToken, onAuthStateChanged, signInAnonymously } from 'firebase/auth';\r\nimport { getFirestore, doc, setDoc, getDoc, collection, query, where, onSnapshot, serverTimestamp, addDoc, updateDoc, getDocs, deleteDoc } from 'firebase/firestore';\r\nimport { useForm } from 'react-hook-form';\r\nimport Sidebar from './components/Sidebar'; // Corrected import path with a capital 'S'\r\nimport './index.css';\r\n\r\n// ----------------------\r\n// Firebase Initialization\r\n// ----------------------\r\n// The following global variables are provided by the Canvas environment.\r\n// For local development, we provide fallback values to avoid compilation errors.\r\nconst appId = typeof __app_id !== 'undefined' ? __app_id : 'default-app-id';\r\nconst firebaseConfig = typeof __firebase_config !== 'undefined' ? JSON.parse(__firebase_config) : {\r\n    // You can replace these with your own Firebase project configuration for full functionality\r\n    apiKey: \"AIzaSyBh7ErxnKurtNkeK_0PW5XW4joDe_r9Ut4\",\r\n    authDomain: \"farmers-management-syste-84643.firebaseapp.com\",\r\n    projectId: \"farmers-management-syste-84643\",\r\n    storageBucket: \"farmers-management-syste-84643.firebasestorage.app\",\r\n    messagingSenderId: \"410779424956\",\r\n    appId: \"1:410779424956:web:b1d26dab35719b1e9a18b9\",\r\n    measurementId: \"G-RD879ML6B6\"\r\n};\r\nconst initialAuthToken = typeof __initial_auth_token !== 'undefined' ? __initial_auth_token : '';\r\n\r\n// Initialize Firebase app and services\r\nconst app = initializeApp(firebaseConfig);\r\nconst db = getFirestore(app);\r\nconst auth = getAuth(app);\r\n\r\n// ----------------------\r\n// Constants & Mock Data\r\n// ----------------------\r\nconst ADMIN_ROLES = {\r\n    FEDERAL: 'Federal',\r\n    REGION: 'Region',\r\n    ZONE: 'Zone',\r\n    WOREDA: 'Woreda',\r\n    KEBELE: 'Kebele',\r\n};\r\n\r\n// The user has requested to keep this constant, but it is not used in this implementation.\r\nconst ADMIN_ROLES_UNUSED = ['admin'];\r\n\r\nconst productTypes = [\r\n    { id: 1, name: 'Tractor', department: 'Biological Input Supply', description: 'Used for plowing' },\r\n    { id: 2, name: 'Harvester', department: 'Biological Input Supply', description: 'Used for harvesting' },\r\n    { id: 3, name: 'Fertilizer (DAP)', department: 'Chemical Input Supply', description: 'Di-ammonium phosphate fertilizer' },\r\n    { id: 4, name: 'Pesticide', department: 'Chemical Input Supply', description: 'Pesticide for crop protection' },\r\n];\r\n\r\nconst mockUsers = [\r\n    { phone: '0912345678', password: 'password123', role: ADMIN_ROLES.FEDERAL, fullName: 'Federal Admin', location: null, uid: 'federal-admin-uid' },\r\n    { phone: '0987654321', password: 'password123', role: ADMIN_ROLES.REGION, fullName: 'Oromia Region Admin', location: 'Oromia', uid: 'oromia-admin-uid' },\r\n    { phone: '0911223344', password: 'password123', role: ADMIN_ROLES.ZONE, fullName: 'Arsi Zone Admin', location: 'Arsi', uid: 'arsi-admin-uid' },\r\n    { phone: '0933445566', password: 'password123', role: ADMIN_ROLES.WOREDA, fullName: 'Tiyo Woreda Admin', location: 'Tiyo', uid: 'tiyo-admin-uid' },\r\n    { phone: '0955667788', password: 'password123', role: ADMIN_ROLES.KEBELE, fullName: 'Wendo Kebele Rep', location: 'Wendo', uid: 'wendo-admin-uid' },\r\n];\r\n\r\n// ----------------------\r\n// Main App Component\r\n// ----------------------\r\nexport default function App() {\r\n    const [currentUser, setCurrentUser] = useState(null);\r\n    const [authReady, setAuthReady] = useState(false);\r\n    const [loading, setLoading] = useState(true);\r\n    const [requests, setRequests] = useState([]);\r\n    const [locations, setLocations] = useState({ regions: [], zones: [], woredas: [], kebeles: [] });\r\n    const [allUsers, setAllUsers] = useState([]);\r\n    const [currentPage, setCurrentPage] = useState('login');\r\n    const [showModal, setShowModal] = useState(false);\r\n    const [modalContent, setModalContent] = useState('');\r\n    const [selectedRequest, setSelectedRequest] = useState(null);\r\n    const [selectedAdminToEdit, setSelectedAdminToEdit] = useState(null);\r\n\r\n    // Initial Firebase setup and auth state listener\r\n    useEffect(() => {\r\n        const setupFirebase = async() => {\r\n            try {\r\n                // Check if the initialAuthToken exists and is not empty\r\n                if (initialAuthToken) {\r\n                    await signInWithCustomToken(auth, initialAuthToken);\r\n                } else {\r\n                    await signInAnonymously(auth);\r\n                }\r\n            } catch (error) {\r\n                console.error(\"Firebase Auth Error:\", error);\r\n                // Fallback to anonymous sign-in if custom token fails\r\n                try {\r\n                    await signInAnonymously(auth);\r\n                } catch (anonError) {\r\n                    console.error(\"Anonymous sign-in failed:\", anonError);\r\n                }\r\n            }\r\n        };\r\n        setupFirebase();\r\n\r\n        const unsubscribeAuth = onAuthStateChanged(auth, (user) => {\r\n            if (user) {\r\n                const userRef = doc(db, 'users', user.uid);\r\n                onSnapshot(userRef, (docSnap) => {\r\n                    if (docSnap.exists()) {\r\n                        const userData = { id: docSnap.id, ...docSnap.data() };\r\n                        setCurrentUser(userData);\r\n                    } else {\r\n                        // For mock users, we set a default role based on the UID\r\n                        const mockUser = mockUsers.find(u => u.uid === user.uid);\r\n                        if (mockUser) {\r\n                            setCurrentUser({...mockUser, id: user.uid });\r\n                        } else {\r\n                            // If a new anonymous user, set a default role or handle as needed\r\n                            setCurrentUser({ id: user.uid, role: 'Farmer' });\r\n                        }\r\n                    }\r\n                    setAuthReady(true);\r\n                }, (error) => {\r\n                    console.error(\"Error fetching user data:\", error);\r\n                });\r\n            } else {\r\n                setCurrentUser(null);\r\n                setAuthReady(true);\r\n            }\r\n        });\r\n\r\n        return () => unsubscribeAuth();\r\n    }, []);\r\n\r\n    // Fetch requests and locations once auth is ready\r\n    useEffect(() => {\r\n        if (!authReady || !currentUser) return;\r\n\r\n        const fetchRequests = () => {\r\n            const requestsCollectionRef = collection(db, 'requests');\r\n            let requestsQuery;\r\n\r\n            // Apply filters based on admin level\r\n            if (currentUser.role === ADMIN_ROLES.FEDERAL) {\r\n                requestsQuery = query(requestsCollectionRef);\r\n            } else if (currentUser.role === ADMIN_ROLES.REGION) {\r\n                requestsQuery = query(requestsCollectionRef, where('location.region', '==', currentUser.location));\r\n            } else if (currentUser.role === ADMIN_ROLES.ZONE) {\r\n                requestsQuery = query(requestsCollectionRef, where('location.zone', '==', currentUser.location));\r\n            } else if (currentUser.role === ADMIN_ROLES.WOREDA) {\r\n                requestsQuery = query(requestsCollectionRef, where('location.woreda', '==', currentUser.location));\r\n            } else if (currentUser.role === ADMIN_ROLES.KEBELE) {\r\n                requestsQuery = query(requestsCollectionRef, where('location.kebele', '==', currentUser.location));\r\n            } else {\r\n                requestsQuery = query(requestsCollectionRef, where('requesterId', '==', currentUser.id));\r\n            }\r\n\r\n            const unsubscribeRequests = onSnapshot(requestsQuery, (snapshot) => {\r\n                const fetchedRequests = snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));\r\n                // Corrected the sorting logic to avoid the syntax error\r\n                const sortedRequests = fetchedRequests.sort((a, b) => {\r\n                    const timeA = (a.timestamp && a.timestamp.seconds) || 0;\r\n                    const timeB = (b.timestamp && b.timestamp.seconds) || 0;\r\n                    return timeB - timeA;\r\n                });\r\n                setRequests(sortedRequests);\r\n            }, (error) => {\r\n                console.error(\"Error fetching requests:\", error);\r\n            });\r\n            return unsubscribeRequests;\r\n        };\r\n\r\n        const fetchLocations = async() => {\r\n            const fetchedRegions = await getDocs(collection(db, 'locations_regions')).then(s => s.docs.map(d => d.data().name));\r\n            const fetchedZones = await getDocs(collection(db, 'locations_zones')).then(s => s.docs.map(d => d.data().name));\r\n            const fetchedWoredas = await getDocs(collection(db, 'locations_woredas')).then(s => s.docs.map(d => d.data().name));\r\n            const fetchedKebeles = await getDocs(collection(db, 'locations_kebeles')).then(s => s.docs.map(d => d.data().name));\r\n            setLocations({\r\n                regions: fetchedRegions,\r\n                zones: fetchedZones,\r\n                woredas: fetchedWoredas,\r\n                kebeles: fetchedKebeles,\r\n            });\r\n        };\r\n\r\n        const fetchUsers = async() => {\r\n            const usersCollectionRef = collection(db, 'users');\r\n            let usersQuery;\r\n            if (currentUser.role === ADMIN_ROLES.FEDERAL) {\r\n                usersQuery = query(usersCollectionRef, where('role', '!=', ADMIN_ROLES.FEDERAL));\r\n            } else if (currentUser.role === ADMIN_ROLES.REGION) {\r\n                usersQuery = query(usersCollectionRef, where('role', '==', ADMIN_ROLES.ZONE), where('location', '==', currentUser.location));\r\n            } else if (currentUser.role === ADMIN_ROLES.ZONE) {\r\n                usersQuery = query(usersCollectionRef, where('role', '==', ADMIN_ROLES.WOREDA), where('location', '==', currentUser.location));\r\n            } else if (currentUser.role === ADMIN_ROLES.WOREDA) {\r\n                usersQuery = query(usersCollectionRef, where('role', '==', ADMIN_ROLES.KEBELE), where('location', '==', currentUser.location));\r\n            } else {\r\n                usersQuery = query(usersCollectionRef, where('role', '==', 'Farmer'));\r\n            }\r\n\r\n            const unsubscribeUsers = onSnapshot(usersQuery, (snapshot) => {\r\n                const fetchedUsers = snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));\r\n                setAllUsers(fetchedUsers);\r\n            }, (error) => {\r\n                console.error(\"Error fetching users:\", error);\r\n            });\r\n            return unsubscribeUsers;\r\n        }\r\n\r\n        const unsubscribeRequests = fetchRequests();\r\n        fetchLocations();\r\n        const unsubscribeUsers = fetchUsers();\r\n        setLoading(false);\r\n\r\n        return () => {\r\n            unsubscribeRequests();\r\n            unsubscribeUsers();\r\n        };\r\n    }, [authReady, currentUser]);\r\n\r\n\r\n    // Helper functions for UI and state management\r\n    const showMessage = (message) => {\r\n        setModalContent(message);\r\n        setShowModal(true);\r\n    };\r\n\r\n    const handleLogout = async() => {\r\n        await auth.signOut();\r\n        setCurrentUser(null);\r\n        setCurrentPage('login');\r\n    };\r\n\r\n    const handleLogin = async(phone, password) => {\r\n        const mockUser = mockUsers.find(u => u.phone === phone && u.password === password);\r\n        if (mockUser) {\r\n            // Simulate login by signing in with the user's custom UID\r\n            try {\r\n                const customToken = mockUser.uid; // In a real app, this would be a real custom token\r\n                await signInWithCustomToken(auth, customToken);\r\n                showMessage(`Welcome, ${mockUser.fullName}!`);\r\n                setCurrentPage('dashboard');\r\n            } catch (error) {\r\n                console.error(\"Login failed:\", error);\r\n                showMessage(\"Login failed. Please check your credentials.\");\r\n            }\r\n        } else {\r\n            showMessage(\"Invalid phone number or password.\");\r\n        }\r\n    };\r\n\r\n\r\n    const handleRequestAction = async(requestId, newStatus, feedback) => {\r\n        if (!currentUser) {\r\n            showMessage(\"You must be logged in to perform this action.\");\r\n            return;\r\n        }\r\n\r\n        try {\r\n            const requestRef = doc(db, 'requests', requestId);\r\n            const requestSnapshot = await getDoc(requestRef);\r\n            if (!requestSnapshot.exists()) {\r\n                showMessage(\"Request not found.\");\r\n                return;\r\n            }\r\n\r\n            const existingApprovals = requestSnapshot.data().approvals || {};\r\n            const newApprovals = {\r\n                ...existingApprovals,\r\n                [currentUser.role.toLowerCase()]: {\r\n                    status: newStatus,\r\n                    by: currentUser.fullName,\r\n                    uid: currentUser.id,\r\n                    feedback: feedback || null,\r\n                    timestamp: serverTimestamp(),\r\n                }\r\n            };\r\n            await updateDoc(requestRef, {\r\n                status: newStatus, // Update overall status to the latest approval\r\n                approvals: newApprovals\r\n            });\r\n            showMessage(`Request ${requestId} has been ${newStatus}.`);\r\n            setSelectedRequest(null); // Close the form\r\n        } catch (error) {\r\n            console.error(\"Error updating request:\", error);\r\n            showMessage(\"Failed to update request status. Please try again.\");\r\n        }\r\n    };\r\n\r\n    // Components for different views\r\n    const MainDashboard = () => {\r\n        const statusCounts = requests.reduce((acc, req) => {\r\n            acc[req.status] = (acc[req.status] || 0) + 1;\r\n            return acc;\r\n        }, {});\r\n        return ( <\r\n            div className = \"p-8\" >\r\n            <\r\n            div className = \"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-6 mb-8\" >\r\n            <\r\n            DashboardCard title = \"Total Requests\"\r\n            count = { requests.length }\r\n            icon = \"📦\" / >\r\n            <\r\n            DashboardCard title = \"Approved\"\r\n            count = { statusCounts['Approved'] || 0 }\r\n            icon = \"✅\" / >\r\n            <\r\n            DashboardCard title = \"Pending\"\r\n            count = { statusCounts['Pending'] || 0 }\r\n            icon = \"🕒\" / >\r\n            <\r\n            DashboardCard title = \"Rejected\"\r\n            count = { statusCounts['Rejected'] || 0 }\r\n            icon = \"❌\" / >\r\n            <\r\n            DashboardCard title = \"Delivered\"\r\n            count = { statusCounts['Delivered'] || 0 }\r\n            icon = \"🚚\" / >\r\n            <\r\n            /div> <\r\n            h2 className = \"text-2xl font-bold mb-4\" > Product Requests Table View < /h2> <\r\n            RequestsTable / >\r\n            <\r\n            /div>\r\n        );\r\n    };\r\n\r\n    const RequestsTable = () => {\r\n        return ( <\r\n            div className = \"bg-white p-6 rounded-xl shadow-lg\" >\r\n            <\r\n            div className = \"overflow-x-auto\" >\r\n            <\r\n            table className = \"min-w-full text-left\" >\r\n            <\r\n            thead >\r\n            <\r\n            tr className = \"bg-gray-100 text-gray-600 uppercase text-sm leading-normal\" >\r\n            <\r\n            th className = \"py-3 px-6 text-left\" > Request ID < /th> <\r\n            th className = \"py-3 px-6 text-left\" > Requester < /th> <\r\n            th className = \"py-3 px-6 text-left\" > Product < /th> <\r\n            th className = \"py-3 px-6 text-left\" > Location < /th> <\r\n            th className = \"py-3 px-6 text-left\" > Status < /th> <\r\n            th className = \"py-3 px-6 text-center\" > Actions < /th> < /\r\n            tr > <\r\n            /thead> <\r\n            tbody className = \"text-gray-600 text-sm font-light\" > {\r\n                requests.length > 0 ? (\r\n                    requests.map(req => ( <\r\n                        tr key = { req.id }\r\n                        className = \"border-b border-gray-200 hover:bg-gray-50\" >\r\n                        <\r\n                        td className = \"py-3 px-6 text-left whitespace-nowrap\" > { req.id } < /td> <\r\n                        td className = \"py-3 px-6 text-left\" > { req.requesterName } < /td> <\r\n                        td className = \"py-3 px-6 text-left\" > { req.productType } < /td> <\r\n                        td className = \"py-3 px-6 text-left\" > { req.location && req.location.region } & gt; { req.location && req.location.zone } & gt; { req.location && req.location.woreda } & gt; { req.location && req.location.kebele } <\r\n                        /td> <\r\n                        td className = \"py-3 px-6 text-left\" >\r\n                        <\r\n                        span className = { `py-1 px-3 rounded-full text-xs font-semibold ${\r\n                                                req.status === 'Approved' ? 'bg-green-200 text-green-600' :\r\n                                                req.status === 'Pending' ? 'bg-yellow-200 text-yellow-600' :\r\n                                                'bg-red-200 text-red-600'\r\n                                            }` } > { req.status } <\r\n                        /span> < /\r\n                        td > <\r\n                        td className = \"py-3 px-6 text-center\" >\r\n                        <\r\n                        button onClick = {\r\n                            () => setSelectedRequest(req)\r\n                        }\r\n                        className = \"bg-blue-500 text-white p-2 rounded-lg hover:bg-blue-600 transition-colors\" > 👁View <\r\n                        /button> < /\r\n                        td > <\r\n                        /tr>\r\n                    ))\r\n                ) : ( <\r\n                    tr >\r\n                    <\r\n                    td colSpan = \"6\"\r\n                    className = \"text-center py-4 text-gray-500\" > No requests found. < /td> < /\r\n                    tr >\r\n                )\r\n            } <\r\n            /tbody> < /\r\n            table > <\r\n            /div> < /\r\n            div >\r\n        );\r\n    };\r\n\r\n    const RequestApprovalForm = ({ request, onClose }) => {\r\n            const { register, handleSubmit } = useForm();\r\n            const onSubmit = data => {\r\n                const newStatus = data.action === 'approve' ? 'Approved' : 'Rejected';\r\n                handleRequestAction(request.id, newStatus, data.feedback);\r\n                onClose();\r\n            };\r\n\r\n            const canApprove = () => {\r\n                if (!currentUser) return false;\r\n                const userRole = currentUser.role.toLowerCase();\r\n                const approvals = request.approvals || {};\r\n\r\n                // Check if the current user has already approved\r\n                if (approvals[userRole] && (approvals[userRole].status === 'Approved' || approvals[userRole].status === 'Rejected')) {\r\n                    return false;\r\n                }\r\n\r\n                // Allow approval if the previous level has approved (or if it's the lowest level)\r\n                if (userRole === 'kebele') {\r\n                    return true;\r\n                }\r\n                if (userRole === 'woreda' && approvals.kebele && approvals.kebele.status === 'Approved') {\r\n                    return true;\r\n                }\r\n                if (userRole === 'zone' && approvals.woreda && approvals.woreda.status === 'Approved') {\r\n                    return true;\r\n                }\r\n                if (userRole === 'region' && approvals.zone && approvals.zone.status === 'Approved') {\r\n                    return true;\r\n                }\r\n                if (userRole === 'federal' && approvals.region && approvals.region.status === 'Approved') {\r\n                    return true;\r\n                }\r\n                return false;\r\n            };\r\n\r\n            return ( <\r\n                    Modal show = { true }\r\n                    onClose = { onClose }\r\n                    title = { `Request Approval for ${request.id}` } >\r\n                    <\r\n                    div className = \"p-6\" >\r\n                    <\r\n                    div className = \"bg-gray-100 p-4 rounded-lg mb-4\" >\r\n                    <\r\n                    h3 className = \"font-bold text-lg mb-2\" > Request Details < /h3> <\r\n                    p > < strong > Requested By: < /strong> {request.requesterName}</p >\r\n                    <\r\n                    p > < strong > Product Type: < /strong> {request.productType}</p >\r\n                    <\r\n                    p > < strong > Amount: < /strong> {request.amount}</p >\r\n                    <\r\n                    p > < strong > Purpose: < /strong> {request.purpose}</p >\r\n                    <\r\n                    p > < strong > Location: < /strong> {request.location && request.location.region} &gt; {request.location && request.location.zone} &gt; {request.location && request.location.woreda} &gt; {request.location && request.location.kebele}</p >\r\n                    <\r\n                    p className = \"mt-2 font-bold\" > Previous Approvals: < /p> {\r\n                    request.approvals && Object.keys(request.approvals).length > 0 ? (\r\n                        Object.entries(request.approvals).map(([role, approval]) => ( <\r\n                            p key = { role } >\r\n                            -{ role }: < span className = { `font-semibold ${approval.status === 'Approved' ? 'text-green-600' : 'text-red-600'}` } > { approval.status } < /span> by {approval.by} < /\r\n                            p >\r\n                        ))\r\n                    ) : ( <\r\n                        p > -No previous approvals. < /p>\r\n                    )\r\n                } <\r\n                /div> {\r\n            canApprove() ? ( <\r\n                form onSubmit = { handleSubmit(onSubmit) } >\r\n                <\r\n                div className = \"mb-4\" >\r\n                <\r\n                label className = \"inline-flex items-center mr-4\" >\r\n                <\r\n                input type = \"radio\" {...register(\"action\", { required: true }) }\r\n                value = \"approve\"\r\n                className = \"form-radio text-green-500\" / >\r\n                <\r\n                span className = \"ml-2\" > Approve < /span> < /\r\n                label > <\r\n                label className = \"inline-flex items-center\" >\r\n                <\r\n                input type = \"radio\" {...register(\"action\", { required: true }) }\r\n                value = \"reject\"\r\n                className = \"form-radio text-red-500\" / >\r\n                <\r\n                span className = \"ml-2\" > Reject < /span> < /\r\n                label > <\r\n                /div> <\r\n                div className = \"mb-4\" >\r\n                <\r\n                label className = \"block text-gray-700 font-bold mb-2\" > Feedback < /label> <\r\n                textarea {...register(\"feedback\") }\r\n                rows = \"3\"\r\n                className = \"w-full p-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n                placeholder = \"Add optional feedback...\" >\r\n                <\r\n                /textarea> < /\r\n                div > <\r\n                button type = \"submit\"\r\n                className = \"w-full bg-blue-500 text-white p-3 rounded-lg hover:bg-blue-600 transition-colors\" >\r\n                Submit Decision <\r\n                /button> < /\r\n                form >\r\n            ) : ( <\r\n                div className = \"bg-yellow-100 p-4 rounded-lg text-yellow-800\" >\r\n                You cannot approve or reject this request at this time. <\r\n                /div>\r\n            )\r\n        } <\r\n        /div> < /\r\n    Modal >\r\n);\r\n};\r\n\r\nconst MasterData = () => {\r\n        const [productData, setProductData] = useState([]);\r\n        const [showAddUserModal, setShowAddUserModal] = useState(false);\r\n        const [showAddProductModal, setShowAddProductModal] = useState(false);\r\n\r\n        // Fetch products from Firestore\r\n        useEffect(() => {\r\n            const productsRef = collection(db, 'products');\r\n            const unsubscribe = onSnapshot(productsRef, (snapshot) => {\r\n                const fetchedProducts = snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));\r\n                setProductData(fetchedProducts);\r\n            });\r\n            return unsubscribe;\r\n        }, []);\r\n\r\n        const isFederalAdmin = currentUser && currentUser.role === ADMIN_ROLES.FEDERAL;\r\n        const canCreateAdmin = (adminRole) => {\r\n            if (currentUser && currentUser.role === ADMIN_ROLES.FEDERAL && adminRole === ADMIN_ROLES.REGION) return true;\r\n            if (currentUser && currentUser.role === ADMIN_ROLES.REGION && adminRole === ADMIN_ROLES.ZONE) return true;\r\n            if (currentUser && currentUser.role === ADMIN_ROLES.ZONE && adminRole === ADMIN_ROLES.WOREDA) return true;\r\n            if (currentUser && currentUser.role === ADMIN_ROLES.WOREDA && adminRole === ADMIN_ROLES.KEBELE) return true;\r\n            return false;\r\n        };\r\n\r\n        const handleAddProduct = async(data) => {\r\n            try {\r\n                await addDoc(collection(db, 'products'), {...data, timestamp: serverTimestamp() });\r\n                showMessage(\"Product added successfully!\");\r\n                setShowAddProductModal(false);\r\n            } catch (error) {\r\n                console.error(\"Error adding product:\", error);\r\n                showMessage(\"Failed to add product. Try again.\");\r\n            }\r\n        };\r\n\r\n        const handleEditProduct = async(productId, data) => {\r\n            try {\r\n                await updateDoc(doc(db, 'products', productId), {...data });\r\n                showMessage(\"Product updated successfully!\");\r\n            } catch (error) {\r\n                console.error(\"Error updating product:\", error);\r\n                showMessage(\"Failed to update product. Try again.\");\r\n            }\r\n        };\r\n\r\n        const handleDeleteProduct = async(productId) => {\r\n            try {\r\n                await deleteDoc(doc(db, 'products', productId));\r\n                showMessage(\"Product deleted successfully!\");\r\n            } catch (error) {\r\n                console.error(\"Error deleting product:\", error);\r\n                showMessage(\"Failed to delete product. Try again.\");\r\n            }\r\n        };\r\n\r\n        const handleAddUser = async(data) => {\r\n            try {\r\n                const newUserRef = doc(collection(db, 'users'));\r\n                const newUserId = newUserRef.id;\r\n                await setDoc(newUserRef, {...data, uid: newUserId, timestamp: serverTimestamp() });\r\n                showMessage(`New ${data.role} admin created! Their ID is ${newUserId}`);\r\n                setShowAddUserModal(false);\r\n            } catch (error) {\r\n                console.error(\"Error adding user:\", error);\r\n                showMessage(\"Failed to add user. Try again.\");\r\n            }\r\n        };\r\n\r\n        return ( <\r\n                div className = \"p-8\" >\r\n                <\r\n                h2 className = \"text-2xl font-bold mb-4\" > Master Data Management < /h2>\r\n\r\n                { /* Users Management Section */ } <\r\n                div className = \"bg-white p-6 rounded-xl shadow-lg mb-8\" >\r\n                <\r\n                h3 className = \"font-bold text-xl mb-4\" > Admin Users < /h3> {\r\n                canCreateAdmin(ADMIN_ROLES.REGION) && ( <\r\n                    button onClick = {\r\n                        () => setShowAddUserModal(true)\r\n                    }\r\n                    className = \"bg-green-500 text-white p-3 rounded-lg hover:bg-green-600 transition-colors mb-4\" >\r\n                    +Add Regional Admin <\r\n                    /button>\r\n                )\r\n            } {\r\n                canCreateAdmin(ADMIN_ROLES.ZONE) && ( <\r\n                    button onClick = {\r\n                        () => setShowAddUserModal(true)\r\n                    }\r\n                    className = \"bg-green-500 text-white p-3 rounded-lg hover:bg-green-600 transition-colors mb-4\" >\r\n                    +Add Zonal Admin <\r\n                    /button>\r\n                )\r\n            } {\r\n                canCreateAdmin(ADMIN_ROLES.WOREDA) && ( <\r\n                    button onClick = {\r\n                        () => setShowAddUserModal(true)\r\n                    }\r\n                    className = \"bg-green-500 text-white p-3 rounded-lg hover:bg-green-600 transition-colors mb-4\" >\r\n                    +Add Woreda Admin <\r\n                    /button>\r\n                )\r\n            } {\r\n                canCreateAdmin(ADMIN_ROLES.KEBELE) && ( <\r\n                    button onClick = {\r\n                        () => setShowAddUserModal(true)\r\n                    }\r\n                    className = \"bg-green-500 text-white p-3 rounded-lg hover:bg-green-600 transition-colors mb-4\" >\r\n                    +Add Kebele Rep <\r\n                    /button>\r\n                )\r\n            } <\r\n            div className = \"overflow-x-auto\" >\r\n            <\r\n            table className = \"min-w-full text-left\" >\r\n            <\r\n            thead >\r\n            <\r\n            tr className = \"bg-gray-100 text-gray-600 uppercase text-sm leading-normal\" >\r\n            <\r\n            th className = \"py-3 px-6 text-left\" > Full Name < /th> <\r\n        th className = \"py-3 px-6 text-left\" > Phone < /th> <\r\n        th className = \"py-3 px-6 text-left\" > Role < /th> <\r\n        th className = \"py-3 px-6 text-left\" > Location < /th> <\r\n        th className = \"py-3 px-6 text-center\" > Actions < /th> < /\r\n        tr > <\r\n            /thead> <\r\n        tbody className = \"text-gray-600 text-sm font-light\" > {\r\n                allUsers.map(user => ( <\r\n                    tr key = { user.id }\r\n                    className = \"border-b border-gray-200 hover:bg-gray-50\" >\r\n                    <\r\n                    td className = \"py-3 px-6\" > { user.fullName } < /td> <\r\n                    td className = \"py-3 px-6\" > { user.phone } < /td> <\r\n                    td className = \"py-3 px-6\" > { user.role } < /td> <\r\n                    td className = \"py-3 px-6\" > { user.location } < /td> <\r\n                    td className = \"py-3 px-6 text-center\" >\r\n                    <\r\n                    button onClick = {\r\n                        () => setSelectedAdminToEdit(user)\r\n                    }\r\n                    className = \"bg-yellow-500 text-white p-2 rounded-lg hover:bg-yellow-600 transition-colors mr-2\" > ✏️Edit <\r\n                    /button> <\r\n                    button onClick = {\r\n                        () => {}\r\n                    }\r\n                    className = \"bg-red-500 text-white p-2 rounded-lg hover:bg-red-600 transition-colors\" > 🗑Delete <\r\n                    /button> < /\r\n                    td > <\r\n                    /tr>\r\n                ))\r\n            } <\r\n            /tbody> < /\r\n        table > <\r\n            /div> < /\r\n        div > {\r\n                showAddUserModal && < AddUserModal onClose = {\r\n                    () => setShowAddUserModal(false)\r\n                }\r\n                onSubmit = { handleAddUser }\r\n                currentUser = { currentUser }\r\n                />}\r\n\r\n                { /* Product Types Management Section */ } <\r\n                div className = \"bg-white p-6 rounded-xl shadow-lg mb-8\" >\r\n                <\r\n                h3 className = \"font-bold text-xl mb-4\" > Product Types < /h3> {\r\n                isFederalAdmin && ( <\r\n                    button onClick = {\r\n                        () => setShowAddProductModal(true)\r\n                    }\r\n                    className = \"bg-green-500 text-white p-3 rounded-lg hover:bg-green-600 transition-colors mb-4\" >\r\n                    +Add product Type <\r\n                    /button>\r\n                )\r\n            } <\r\n            div className = \"overflow-x-auto\" >\r\n            <\r\n            table className = \"min-w-full text-left\" >\r\n            <\r\n            thead >\r\n            <\r\n            tr className = \"bg-gray-100 text-gray-600 uppercase text-sm leading-normal\" >\r\n            <\r\n            th className = \"py-3 px-6 text-left\" > ID < /th> <\r\n        th className = \"py-3 px-6 text-left\" > Name < /th> <\r\n        th className = \"py-3 px-6 text-left\" > Department < /th> <\r\n        th className = \"py-3 px-6 text-left\" > Description < /th> <\r\n        th className = \"py-3 px-6 text-center\" > Actions < /th> < /\r\n        tr > <\r\n            /thead> <\r\n        tbody className = \"text-gray-600 text-sm font-light\" > {\r\n            productData.map(prod => ( <\r\n                    tr key = { prod.id }\r\n                    className = \"border-b border-gray-200 hover:bg-gray-50\" >\r\n                    <\r\n                    td className = \"py-3 px-6\" > { prod.id } < /td> <\r\n                    td className = \"py-3 px-6\" > { prod.name } < /td> <\r\n                    td className = \"py-3 px-6\" > { prod.department } < /td> <\r\n                    td className = \"py-3 px-6\" > { prod.description } < /td> <\r\n                    td className = \"py-3 px-6 text-center\" >\r\n                    <\r\n                    button onClick = {\r\n                        () => {}\r\n                    }\r\n                    className = \"bg-yellow-500 text-white p-2 rounded-lg hover:bg-yellow-600 transition-colors mr-2\" > ✏️Edit <\r\n                    /button> {\r\n                    isFederalAdmin && ( <\r\n                        button onClick = {\r\n                            () => handleDeleteProduct(prod.id)\r\n                        }\r\n                        className = \"bg-red-500 text-white p-2 rounded-lg hover:bg-red-600 transition-colors\" > 🗑Delete <\r\n                        /button>\r\n                    )\r\n                } <\r\n                /td> < /\r\n                tr >\r\n            ))\r\n    } <\r\n    /tbody> < /\r\ntable > <\r\n    /div> < /\r\ndiv > {\r\n    showAddProductModal && < AddProductModal onClose = {\r\n        () => setShowAddProductModal(false)\r\n    }\r\n    onSubmit = { handleAddProduct }\r\n    />} < /\r\n    div >\r\n);\r\n};\r\n\r\nconst AddUserModal = ({ onClose, onSubmit, currentUser }) => {\r\n        const { register, handleSubmit, formState: { errors } } = useForm();\r\n        const getNextRole = () => {\r\n            if (currentUser && currentUser.role === ADMIN_ROLES.FEDERAL) return ADMIN_ROLES.REGION;\r\n            if (currentUser && currentUser.role === ADMIN_ROLES.REGION) return ADMIN_ROLES.ZONE;\r\n            if (currentUser && currentUser.role === ADMIN_ROLES.ZONE) return ADMIN_ROLES.WOREDA;\r\n            if (currentUser && currentUser.role === ADMIN_ROLES.WOREDA) return ADMIN_ROLES.KEBELE;\r\n            return 'Farmer';\r\n        };\r\n\r\n        const getNextLocations = () => {\r\n            if (currentUser && currentUser.role === ADMIN_ROLES.FEDERAL) return locations.regions;\r\n            if (currentUser && currentUser.role === ADMIN_ROLES.REGION) return locations.zones.filter(z => z.parent === currentUser.location);\r\n            if (currentUser && currentUser.role === ADMIN_ROLES.ZONE) return locations.woredas.filter(w => w.parent === currentUser.location);\r\n            if (currentUser && currentUser.role === ADMIN_ROLES.WOREDA) return locations.kebeles.filter(k => k.parent === currentUser.location);\r\n            return [];\r\n        };\r\n        const nextRole = getNextRole();\r\n        const nextLocations = getNextLocations();\r\n\r\n        return ( <\r\n                Modal show = { true }\r\n                onClose = { onClose }\r\n                title = { `Add New ${nextRole} Admin` } >\r\n                <\r\n                form onSubmit = { handleSubmit(onSubmit) }\r\n                className = \"p-6\" >\r\n                <\r\n                div className = \"mb-4\" >\r\n                <\r\n                label className = \"block text-gray-700 font-bold mb-2\" > Full Name < /label> <\r\n                input {...register(\"fullName\", { required: \"Full name is required\" }) }\r\n                className = \"w-full p-2 border rounded-lg\"\r\n                type = \"text\" /\r\n                >\r\n                {\r\n                    errors.fullName && < p className = \"text-red-500 text-sm mt-1\" > { errors.fullName.message } < /p>} < /\r\n                    div > <\r\n                    div className = \"mb-4\" >\r\n                    <\r\n                    label className = \"block text-gray-700 font-bold mb-2\" > Phone Number < /label> <\r\n                    input {...register(\"phone\", { required: \"Phone number is required\" }) }\r\n                    className = \"w-full p-2 border rounded-lg\"\r\n                    type = \"tel\" /\r\n                    >\r\n                    {\r\n                        errors.phone && < p className = \"text-red-500 text-sm mt-1\" > { errors.phone.message } < /p>} < /\r\n                        div > <\r\n                        div className = \"mb-4\" >\r\n                        <\r\n                        label className = \"block text-gray-700 font-bold mb-2\" > Password < /label> <\r\n                        input {...register(\"password\", { required: \"Password is required\" }) }\r\n                        className = \"w-full p-2 border rounded-lg\"\r\n                        type = \"password\" /\r\n                        >\r\n                        {\r\n                            errors.password && < p className = \"text-red-500 text-sm mt-1\" > { errors.password.message } < /p>} < /\r\n                            div > <\r\n                            div className = \"mb-4\" >\r\n                            <\r\n                            label className = \"block text-gray-700 font-bold mb-2\" > Location < /label> <\r\n                            select {...register(\"location\", { required: \"Location is required\" }) }\r\n                            className = \"w-full p-2 border rounded-lg\" >\r\n                            <\r\n                            option value = \"\" > Select a location < /option> {\r\n                            nextLocations.map(loc => ( <\r\n                                option key = { loc }\r\n                                value = { loc } > { loc } < /option>\r\n                            ))\r\n                        } <\r\n                        /select> {\r\n                        errors.location && < p className = \"text-red-500 text-sm mt-1\" > { errors.location.message } < /p>} < /\r\n                        div > <\r\n                        input type = \"hidden\" {...register(\"role\") }\r\n                        value = { nextRole }\r\n                        /> <\r\n                        button type = \"submit\"\r\n                        className = \"w-full bg-blue-500 text-white p-3 rounded-lg hover:bg-blue-600 transition-colors\" >\r\n                        Add User <\r\n                        /button> < /\r\n                        form > <\r\n                        /Modal>\r\n                    );\r\n                };\r\n\r\n                const AddProductModal = ({ onClose, onSubmit }) => {\r\n                        const { register, handleSubmit, formState: { errors } } = useForm();\r\n                        return ( <\r\n                                Modal show = { true }\r\n                                onClose = { onClose }\r\n                                title = \"Add New Product\" >\r\n                                <\r\n                                form onSubmit = { handleSubmit(onSubmit) }\r\n                                className = \"p-6\" >\r\n                                <\r\n                                div className = \"mb-4\" >\r\n                                <\r\n                                label className = \"block text-gray-700 font-bold mb-2\" > Product Name < /label> <\r\n                                input {...register(\"name\", { required: \"Product name is required\" }) }\r\n                                className = \"w-full p-2 border rounded-lg\"\r\n                                type = \"text\" /\r\n                                >\r\n                                {\r\n                                    errors.name && < p className = \"text-red-500 text-sm mt-1\" > { errors.name.message } < /p>} < /\r\n                                    div > <\r\n                                    div className = \"mb-4\" >\r\n                                    <\r\n                                    label className = \"block text-gray-700 font-bold mb-2\" > Department < /label> <\r\n                                    select {...register(\"department\", { required: \"Department is required\" }) }\r\n                                    className = \"w-full p-2 border rounded-lg\" >\r\n                                    <\r\n                                    option value = \"\" > Select Department < /option> <\r\n                                    option value = \"Biological Input Supply\" > Biological Input Supply < /option> <\r\n                                    option value = \"Chemical Input Supply\" > Chemical Input Supply < /option> < /\r\n                                    select > {\r\n                                        errors.department && < p className = \"text-red-500 text-sm mt-1\" > { errors.department.message } < /p>} < /\r\n                                        div > <\r\n                                        div className = \"mb-4\" >\r\n                                        <\r\n                                        label className = \"block text-gray-700 font-bold mb-2\" > Description < /label> <\r\n                                        textarea {...register(\"description\") }\r\n                                        rows = \"3\"\r\n                                        className = \"w-full p-2 border rounded-lg\" >\r\n                                        <\r\n                                        /textarea> < /\r\n                                        div > <\r\n                                        button type = \"submit\"\r\n                                        className = \"w-full bg-blue-500 text-white p-3 rounded-lg hover:bg-blue-600 transition-colors\" >\r\n                                        Add Product <\r\n                                        /button> < /\r\n                                        form > <\r\n                                        /Modal>\r\n                                    );\r\n                                };\r\n\r\n\r\n                                const Reports = () => {\r\n                                    return ( <\r\n                                        div className = \"p-8\" >\r\n                                        <\r\n                                        h2 className = \"text-2xl font-bold mb-4\" > Reports < /h2> <\r\n                                        div className = \"grid grid-cols-1 md:grid-cols-2 gap-8\" >\r\n                                        <\r\n                                        div className = \"bg-white p-6 rounded-xl shadow-lg\" >\r\n                                        <\r\n                                        h3 className = \"font-bold text-xl mb-4\" > Requests by Region < /h3> <\r\n                                        p className = \"text-gray-500\" > [Bar Chart: A placeholder\r\n                                            for a bar chart showing requests by region\r\n                                        ] <\r\n                                        /p> < /\r\n                                        div > <\r\n                                        div className = \"bg-white p-6 rounded-xl shadow-lg\" >\r\n                                        <\r\n                                        h3 className = \"font-bold text-xl mb-4\" > Product Type Usage < /h3> <\r\n                                        p className = \"text-gray-500\" > [Pie Chart: A placeholder\r\n                                            for a pie chart showing product type usage\r\n                                        ] <\r\n                                        /p> < /\r\n                                        div > <\r\n                                        /div> < /\r\n                                        div >\r\n                                    );\r\n                                };\r\n\r\n                                const DashboardCard = ({ title, count, icon }) => ( <\r\n                                    div className = \"bg-white p-6 rounded-xl shadow-lg flex items-center justify-between\" >\r\n                                    <\r\n                                    div >\r\n                                    <\r\n                                    h3 className = \"text-xl font-semibold text-gray-500\" > { title } < /h3> <\r\n                                    p className = \"text-4xl font-bold text-gray-800\" > { count } < /p> < /\r\n                                    div > <\r\n                                    div className = \"text-5xl text-blue-500\" > { icon } < /div> < /\r\n                                    div >\r\n                                );\r\n\r\n                                const Modal = ({ show, onClose, title, message, children }) => {\r\n                                        if (!show) return null;\r\n                                        return ( <\r\n                                            div className = \"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center p-4\" >\r\n                                            <\r\n                                            div className = \"bg-white rounded-xl shadow-2xl w-full max-w-md\" >\r\n                                            <\r\n                                            div className = \"flex justify-between items-center p-4 border-b\" >\r\n                                            <\r\n                                            h2 className = \"text-xl font-bold\" > { title } < /h2> <\r\n                                            button onClick = { onClose }\r\n                                            className = \"text-gray-500 hover:text-gray-800 text-2xl leading-none\" > & times; < /button> < /\r\n                                            div > <\r\n                                            div className = \"p-4\" > {\r\n                                                message && < p className = \"mb-4 text-gray-700\" > { message } < /p>} { children } < /\r\n                                                div > <\r\n                                                /div> < /\r\n                                                div >\r\n                                            );\r\n                                        };\r\n\r\n                                        const LoginScreen = () => {\r\n                                                const { register, handleSubmit, formState: { errors } } = useForm();\r\n                                                const onSubmit = data => {\r\n                                                    handleLogin(data.phone, data.password);\r\n                                                };\r\n                                                return ( <\r\n                                                        div className = \"flex items-center justify-center min-h-screen bg-gray-100 p-4\" >\r\n                                                        <\r\n                                                        div className = \"bg-white p-8 rounded-xl shadow-2xl w-full max-w-sm\" >\r\n                                                        <\r\n                                                        h2 className = \"text-3xl font-bold text-center mb-6\" > Admin Login < /h2> <\r\n                                                        p className = \"text-center text-gray-500 mb-6\" > Use one of the mock credentials to log in . < /p> <\r\n                                                        form onSubmit = { handleSubmit(onSubmit) } >\r\n                                                        <\r\n                                                        div className = \"mb-4\" >\r\n                                                        <\r\n                                                        label className = \"block text-gray-700 font-bold mb-2\" > Phone Number < /label> <\r\n                                                        input {...register(\"phone\", { required: \"Phone number is required\" }) }\r\n                                                        className = \"w-full p-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n                                                        type = \"tel\"\r\n                                                        placeholder = \"e.g. 0912345678\" /\r\n                                                        >\r\n                                                        {\r\n                                                            errors.phone && < p className = \"text-red-500 text-sm mt-1\" > { errors.phone.message } < /p>} < /\r\n                                                            div > <\r\n                                                            div className = \"mb-6\" >\r\n                                                            <\r\n                                                            label className = \"block text-gray-700 font-bold mb-2\" > Password < /label> <\r\n                                                            input {...register(\"password\", { required: \"Password is required\" }) }\r\n                                                            className = \"w-full p-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n                                                            type = \"password\"\r\n                                                            placeholder = \"password123\" /\r\n                                                            >\r\n                                                            {\r\n                                                                errors.password && < p className = \"text-red-500 text-sm mt-1\" > { errors.password.message } < /p>} < /\r\n                                                                div > <\r\n                                                                button\r\n                                                                type = \"submit\"\r\n                                                                className = \"w-full bg-blue-500 text-white p-3 rounded-lg font-bold hover:bg-blue-600 transition-colors\" >\r\n                                                                Login <\r\n                                                                /button> < /\r\n                                                                form > <\r\n                                                                /div> < /\r\n                                                                div >\r\n                                                            );\r\n                                                        };\r\n\r\n                                                        if (loading || !authReady) {\r\n                                                            return <div className = \"flex items-center justify-center min-h-screen text-2xl font-semibold\" > Loading... < /div>;\r\n                                                        }\r\n\r\n                                                        if (!currentUser || currentPage === 'login') {\r\n                                                            return <LoginScreen / > ;\r\n                                                        }\r\n\r\n                                                        return ( <\r\n                                                            div className = \"flex min-h-screen bg-gray-100 font-inter\" >\r\n                                                            <\r\n                                                            Sidebar currentPage = { currentPage }\r\n                                                            setCurrentPage = { setCurrentPage }\r\n                                                            currentUser = { currentUser }\r\n                                                            /> <\r\n                                                            div className = \"flex-1 flex flex-col\" >\r\n                                                            <\r\n                                                            header className = \"bg-white shadow-md p-4 flex justify-between items-center\" >\r\n                                                            <\r\n                                                            h1 className = \"text-2xl font-bold text-gray-800\" > product Request Management System < /h1> <\r\n                                                            div className = \"flex items-center space-x-4\" >\r\n                                                            <\r\n                                                            span className = \"text-gray-700\" > 👤{ currentUser.fullName }({ currentUser.role }) < /span> <\r\n                                                            button onClick = { handleLogout }\r\n                                                            className = \"bg-red-500 text-white p-2 rounded-lg hover:bg-red-600 transition-colors\" > Logout < /button> < /\r\n                                                            div > <\r\n                                                            /header> <\r\n                                                            main className = \"flex-1 overflow-auto\" > { currentPage === 'dashboard' && < MainDashboard / > } { currentPage === 'master-data' && < MasterData / > } { currentPage === 'reports' && < Reports / > } {\r\n                                                                selectedRequest && < RequestApprovalForm request = { selectedRequest }\r\n                                                                onClose = {\r\n                                                                    () => setSelectedRequest(null)\r\n                                                                }\r\n                                                                />} < /\r\n                                                                main > <\r\n                                                                    /div> <\r\n                                                                Modal show = { showModal }\r\n                                                                onClose = {\r\n                                                                    () => setShowModal(false)\r\n                                                                }\r\n                                                                title = \"Notification\"\r\n                                                                message = { modalContent }\r\n                                                                /> < /\r\n                                                                div >\r\n                                                            );\r\n                                                        }"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"var _jsxFileName = \"D:\\\\FARMERS\\\\frontend\\\\src\\\\App.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { initializeApp } from 'firebase/app';\nimport { getAuth, signInWithCustomToken, onAuthStateChanged, signInAnonymously } from 'firebase/auth';\nimport { getFirestore, doc, setDoc, getDoc, collection, query, where, onSnapshot, serverTimestamp, addDoc, updateDoc, getDocs } from 'firebase/firestore';\nimport { useForm } from 'react-hook-form';\n\n// The following global variables are provided by the Canvas environment.\n// We must always use them for Firebase setup.\nconst appId = typeof __app_id !== 'undefined' ? __app_id : 'default-app-id';\nconst firebaseConfig = typeof __firebase_config !== 'undefined' ? JSON.parse(__firebase_config) : {};\nconst initialAuthToken = typeof __initial_auth_token !== 'undefined' ? __initial_auth_token : '';\n\n// Import all components\nimport Header from './components/Header';\nimport Sidebar from './components/Sidebar';\nimport Modal from './components/Modal';\nimport LoginForm from './components/LoginForm';\nimport DashboardPage from './pages/DashboardPage';\nimport ReportsPage from './pages/ReportsPage';\nimport NewRequestForm from './pages/NewRequestForm';\nimport RequestApprovalForm from './pages/RequestApprovalForm';\n\n// ----------------------\n// Firebase Initialization\n// ----------------------\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst app = initializeApp(firebaseConfig);\nconst db = getFirestore(app);\nconst auth = getAuth(app);\n\n// ----------------------\n// Main App Component\n// ----------------------\nexport default function App() {\n  _s();\n  const [currentUser, setCurrentUser] = useState(null);\n  const [authReady, setAuthReady] = useState(false);\n  const [loading, setLoading] = useState(true);\n  const [requests, setRequests] = useState([]);\n  const [locations, setLocations] = useState({\n    regions: [],\n    zones: [],\n    woredas: []\n  });\n  const [currentPage, setCurrentPage] = useState('dashboard');\n  const [showModal, setShowModal] = useState(false);\n  const [modalContent, setModalContent] = useState('');\n  const [selectedRequest, setSelectedRequest] = useState(null);\n\n  // Get the current user's role from their details in Firestore\n  const fetchUserRole = async uid => {\n    try {\n      const userRef = doc(db, 'artifacts', appId, 'users', uid);\n      const userSnap = await getDoc(userRef);\n      if (userSnap.exists()) {\n        const userData = userSnap.data();\n        setCurrentUser(prev => ({\n          ...prev,\n          ...userData\n        }));\n      }\n    } catch (error) {\n      console.error('Error fetching user role:', error);\n    }\n  };\n\n  // Firebase authentication and data fetching\n  useEffect(() => {\n    const unsubscribe = onAuthStateChanged(auth, async user => {\n      if (user) {\n        // If a user is logged in, fetch their role and other data\n        setCurrentUser(user);\n        await fetchUserRole(user.uid);\n        setAuthReady(true);\n      } else {\n        // If no user, sign in anonymously or with a custom token\n        try {\n          if (initialAuthToken) {\n            await signInWithCustomToken(auth, initialAuthToken);\n          } else {\n            await signInAnonymously(auth);\n          }\n        } catch (error) {\n          console.error('Authentication Error:', error);\n        }\n      }\n    });\n    return () => unsubscribe();\n  }, []);\n\n  // Fetch locations from Firestore\n  useEffect(() => {\n    if (!authReady) return;\n    const locationsRef = collection(db, 'artifacts', appId, 'public', 'data', 'locations');\n    const unsubscribeLocations = onSnapshot(locationsRef, snapshot => {\n      const fetchedLocations = {\n        regions: [],\n        zones: [],\n        woredas: []\n      };\n      snapshot.docs.forEach(doc => {\n        const data = doc.data();\n        if (data.type === 'region') fetchedLocations.regions.push(data);\n        if (data.type === 'zone') fetchedLocations.zones.push(data);\n        if (data.type === 'woreda') fetchedLocations.woredas.push(data);\n      });\n      setLocations(fetchedLocations);\n      setLoading(false);\n    });\n    return () => unsubscribeLocations();\n  }, [authReady]);\n\n  // Fetch requests from Firestore\n  useEffect(() => {\n    if (!authReady || !currentUser) return;\n    const requestsRef = collection(db, 'artifacts', appId, 'public', 'data', 'requests');\n    const q = query(requestsRef);\n    const unsubscribeRequests = onSnapshot(q, snapshot => {\n      const fetchedRequests = snapshot.docs.map(doc => ({\n        id: doc.id,\n        ...doc.data()\n      }));\n      setRequests(fetchedRequests);\n    });\n    return () => unsubscribeRequests();\n  }, [authReady, currentUser]);\n\n  // Function to handle showing the modal\n  const showModalMessage = message => {\n    setModalContent(message);\n    setShowModal(true);\n  };\n\n  // Handle user login and role assignment\n  const handleLogin = async userCredentials => {\n    let userId;\n    if (auth.currentUser) {\n      userId = auth.currentUser.uid;\n    } else {\n      userId = crypto.randomUUID();\n    }\n    const userRef = doc(db, 'artifacts', appId, 'users', userId);\n    const userData = {\n      role: userCredentials.role,\n      locationLevel: userCredentials.locationLevel,\n      locationId: userCredentials.locationId\n    };\n    try {\n      await setDoc(userRef, userData, {\n        merge: true\n      });\n      setCurrentUser(prev => ({\n        ...prev,\n        ...userData\n      }));\n      showModalMessage('Login successful!');\n    } catch (error) {\n      console.error('Error setting user data:', error);\n      showModalMessage('Failed to set user data. Please try again.');\n    }\n  };\n  const handleViewRequest = request => {\n    setSelectedRequest(request);\n    setCurrentPage('view-request');\n  };\n  const getPendingRequests = () => {\n    return requests.filter(req => req.status === 'Pending');\n  };\n  const getApprovedRequests = () => {\n    return requests.filter(req => req.status === 'Approved');\n  };\n  const getRejectedRequests = () => {\n    return requests.filter(req => req.status === 'Rejected');\n  };\n  if (loading || !authReady) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex items-center justify-center min-h-screen\",\n      children: \" Loading... \"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 16\n    }, this);\n  }\n\n  // Corrected line to check for currentUser role\n  if (!currentUser || !currentUser.role) {\n    return /*#__PURE__*/_jsxDEV(LoginForm, {\n      onLogin: handleLogin,\n      locations: locations,\n      showModal: showModalMessage\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 16\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flex min-h-screen bg-gray-100 font-sans antialiased\",\n    children: [/*#__PURE__*/_jsxDEV(Sidebar, {\n      currentPage: currentPage,\n      setCurrentPage: setCurrentPage\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 13\n    }, this), \" \", /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex-1 flex flex-col\",\n      children: [/*#__PURE__*/_jsxDEV(Header, {\n        user: currentUser\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 13\n      }, this), \" \", /*#__PURE__*/_jsxDEV(\"main\", {\n        className: \"flex-1 p-8\",\n        children: [\" \", currentPage === 'dashboard' && /*#__PURE__*/_jsxDEV(DashboardPage, {\n          user: currentUser,\n          requests: requests,\n          onViewRequest: handleViewRequest\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 193,\n          columnNumber: 48\n        }, this), \" \", currentPage === 'pending-requests' && /*#__PURE__*/_jsxDEV(DashboardPage, {\n          user: currentUser,\n          requests: getPendingRequests(),\n          onViewRequest: handleViewRequest\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 197,\n          columnNumber: 59\n        }, this), \" \", currentPage === 'approved-requests' && /*#__PURE__*/_jsxDEV(DashboardPage, {\n          user: currentUser,\n          requests: getApprovedRequests(),\n          onViewRequest: handleViewRequest\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 201,\n          columnNumber: 64\n        }, this), \" \", currentPage === 'rejected-requests' && /*#__PURE__*/_jsxDEV(DashboardPage, {\n          user: currentUser,\n          requests: getRejectedRequests(),\n          onViewRequest: handleViewRequest\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 205,\n          columnNumber: 68\n        }, this), \" \", currentPage === 'reports' && /*#__PURE__*/_jsxDEV(ReportsPage, {\n          user: currentUser\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 209,\n          columnNumber: 62\n        }, this), \" \", currentPage === 'new-request' && /*#__PURE__*/_jsxDEV(NewRequestForm, {\n          user: currentUser,\n          showModal: showModalMessage\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 211,\n          columnNumber: 70\n        }, this), \" \", currentPage === 'view-request' && /*#__PURE__*/_jsxDEV(RequestApprovalForm, {\n          user: currentUser,\n          request: selectedRequest,\n          showModal: showModalMessage\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 214,\n          columnNumber: 75\n        }, this), \" \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 16\n      }, this), \" \"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 16\n    }, this), \" \", /*#__PURE__*/_jsxDEV(Modal, {\n      show: showModal,\n      onClose: () => setShowModal(false),\n      title: \"Notification\",\n      message: modalContent\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 219,\n      columnNumber: 47\n    }, this), \" \"]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 182,\n    columnNumber: 14\n  }, this);\n}\n_s(App, \"Kj3MkcO9K0Nu/hrt+0RiUmUtGxE=\");\n_c = App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","useEffect","initializeApp","getAuth","signInWithCustomToken","onAuthStateChanged","signInAnonymously","getFirestore","doc","setDoc","getDoc","collection","query","where","onSnapshot","serverTimestamp","addDoc","updateDoc","getDocs","useForm","appId","__app_id","firebaseConfig","__firebase_config","JSON","parse","initialAuthToken","__initial_auth_token","Header","Sidebar","Modal","LoginForm","DashboardPage","ReportsPage","NewRequestForm","RequestApprovalForm","jsxDEV","_jsxDEV","app","db","auth","App","_s","currentUser","setCurrentUser","authReady","setAuthReady","loading","setLoading","requests","setRequests","locations","setLocations","regions","zones","woredas","currentPage","setCurrentPage","showModal","setShowModal","modalContent","setModalContent","selectedRequest","setSelectedRequest","fetchUserRole","uid","userRef","userSnap","exists","userData","data","prev","error","console","unsubscribe","user","locationsRef","unsubscribeLocations","snapshot","fetchedLocations","docs","forEach","type","push","requestsRef","q","unsubscribeRequests","fetchedRequests","map","id","showModalMessage","message","handleLogin","userCredentials","userId","crypto","randomUUID","role","locationLevel","locationId","merge","handleViewRequest","request","getPendingRequests","filter","req","status","getApprovedRequests","getRejectedRequests","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onLogin","onViewRequest","show","onClose","title","_c","$RefreshReg$"],"sources":["D:/FARMERS/frontend/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { initializeApp } from 'firebase/app';\r\nimport { getAuth, signInWithCustomToken, onAuthStateChanged, signInAnonymously } from 'firebase/auth';\r\nimport { getFirestore, doc, setDoc, getDoc, collection, query, where, onSnapshot, serverTimestamp, addDoc, updateDoc, getDocs } from 'firebase/firestore';\r\nimport { useForm } from 'react-hook-form';\r\n\r\n// The following global variables are provided by the Canvas environment.\r\n// We must always use them for Firebase setup.\r\nconst appId = typeof __app_id !== 'undefined' ? __app_id : 'default-app-id';\r\nconst firebaseConfig = typeof __firebase_config !== 'undefined' ? JSON.parse(__firebase_config) : {};\r\nconst initialAuthToken = typeof __initial_auth_token !== 'undefined' ? __initial_auth_token : '';\r\n\r\n// Import all components\r\nimport Header from './components/Header';\r\nimport Sidebar from './components/Sidebar';\r\nimport Modal from './components/Modal';\r\nimport LoginForm from './components/LoginForm';\r\nimport DashboardPage from './pages/DashboardPage';\r\nimport ReportsPage from './pages/ReportsPage';\r\nimport NewRequestForm from './pages/NewRequestForm';\r\nimport RequestApprovalForm from './pages/RequestApprovalForm';\r\n\r\n// ----------------------\r\n// Firebase Initialization\r\n// ----------------------\r\nconst app = initializeApp(firebaseConfig);\r\nconst db = getFirestore(app);\r\nconst auth = getAuth(app);\r\n\r\n// ----------------------\r\n// Main App Component\r\n// ----------------------\r\nexport default function App() {\r\n    const [currentUser, setCurrentUser] = useState(null);\r\n    const [authReady, setAuthReady] = useState(false);\r\n    const [loading, setLoading] = useState(true);\r\n    const [requests, setRequests] = useState([]);\r\n    const [locations, setLocations] = useState({ regions: [], zones: [], woredas: [] });\r\n    const [currentPage, setCurrentPage] = useState('dashboard');\r\n    const [showModal, setShowModal] = useState(false);\r\n    const [modalContent, setModalContent] = useState('');\r\n    const [selectedRequest, setSelectedRequest] = useState(null);\r\n\r\n    // Get the current user's role from their details in Firestore\r\n    const fetchUserRole = async(uid) => {\r\n        try {\r\n            const userRef = doc(db, 'artifacts', appId, 'users', uid);\r\n            const userSnap = await getDoc(userRef);\r\n            if (userSnap.exists()) {\r\n                const userData = userSnap.data();\r\n                setCurrentUser(prev => ({...prev, ...userData }));\r\n            }\r\n        } catch (error) {\r\n            console.error('Error fetching user role:', error);\r\n        }\r\n    };\r\n\r\n    // Firebase authentication and data fetching\r\n    useEffect(() => {\r\n        const unsubscribe = onAuthStateChanged(auth, async(user) => {\r\n            if (user) {\r\n                // If a user is logged in, fetch their role and other data\r\n                setCurrentUser(user);\r\n                await fetchUserRole(user.uid);\r\n                setAuthReady(true);\r\n            } else {\r\n                // If no user, sign in anonymously or with a custom token\r\n                try {\r\n                    if (initialAuthToken) {\r\n                        await signInWithCustomToken(auth, initialAuthToken);\r\n                    } else {\r\n                        await signInAnonymously(auth);\r\n                    }\r\n                } catch (error) {\r\n                    console.error('Authentication Error:', error);\r\n                }\r\n            }\r\n        });\r\n        return () => unsubscribe();\r\n    }, []);\r\n\r\n    // Fetch locations from Firestore\r\n    useEffect(() => {\r\n        if (!authReady) return;\r\n\r\n        const locationsRef = collection(db, 'artifacts', appId, 'public', 'data', 'locations');\r\n        const unsubscribeLocations = onSnapshot(locationsRef, (snapshot) => {\r\n            const fetchedLocations = { regions: [], zones: [], woredas: [] };\r\n            snapshot.docs.forEach(doc => {\r\n                const data = doc.data();\r\n                if (data.type === 'region') fetchedLocations.regions.push(data);\r\n                if (data.type === 'zone') fetchedLocations.zones.push(data);\r\n                if (data.type === 'woreda') fetchedLocations.woredas.push(data);\r\n            });\r\n            setLocations(fetchedLocations);\r\n            setLoading(false);\r\n        });\r\n\r\n        return () => unsubscribeLocations();\r\n    }, [authReady]);\r\n\r\n    // Fetch requests from Firestore\r\n    useEffect(() => {\r\n        if (!authReady || !currentUser) return;\r\n\r\n        const requestsRef = collection(db, 'artifacts', appId, 'public', 'data', 'requests');\r\n        const q = query(requestsRef);\r\n\r\n        const unsubscribeRequests = onSnapshot(q, (snapshot) => {\r\n            const fetchedRequests = snapshot.docs.map(doc => ({\r\n                id: doc.id,\r\n                ...doc.data()\r\n            }));\r\n            setRequests(fetchedRequests);\r\n        });\r\n\r\n        return () => unsubscribeRequests();\r\n    }, [authReady, currentUser]);\r\n\r\n    // Function to handle showing the modal\r\n    const showModalMessage = (message) => {\r\n        setModalContent(message);\r\n        setShowModal(true);\r\n    };\r\n\r\n    // Handle user login and role assignment\r\n    const handleLogin = async(userCredentials) => {\r\n        let userId;\r\n        if (auth.currentUser) {\r\n            userId = auth.currentUser.uid;\r\n        } else {\r\n            userId = crypto.randomUUID();\r\n        }\r\n\r\n        const userRef = doc(db, 'artifacts', appId, 'users', userId);\r\n\r\n        const userData = {\r\n            role: userCredentials.role,\r\n            locationLevel: userCredentials.locationLevel,\r\n            locationId: userCredentials.locationId,\r\n        };\r\n\r\n        try {\r\n            await setDoc(userRef, userData, { merge: true });\r\n            setCurrentUser(prev => ({...prev, ...userData }));\r\n            showModalMessage('Login successful!');\r\n        } catch (error) {\r\n            console.error('Error setting user data:', error);\r\n            showModalMessage('Failed to set user data. Please try again.');\r\n        }\r\n    };\r\n\r\n    const handleViewRequest = (request) => {\r\n        setSelectedRequest(request);\r\n        setCurrentPage('view-request');\r\n    };\r\n\r\n    const getPendingRequests = () => {\r\n        return requests.filter(req => req.status === 'Pending');\r\n    };\r\n\r\n    const getApprovedRequests = () => {\r\n        return requests.filter(req => req.status === 'Approved');\r\n    };\r\n\r\n    const getRejectedRequests = () => {\r\n        return requests.filter(req => req.status === 'Rejected');\r\n    };\r\n\r\n    if (loading || !authReady) {\r\n        return <div className = \"flex items-center justify-center min-h-screen\" > Loading... < /div>;\r\n    }\r\n\r\n    // Corrected line to check for currentUser role\r\n    if (!currentUser || !currentUser.role) {\r\n        return <LoginForm onLogin = { handleLogin }\r\n        locations = { locations }\r\n        showModal = { showModalMessage }\r\n        />;\r\n    }\r\n\r\n    return ( <\r\n            div className = \"flex min-h-screen bg-gray-100 font-sans antialiased\" >\r\n            <\r\n            Sidebar currentPage = { currentPage }\r\n            setCurrentPage = { setCurrentPage }\r\n            /> <\r\n            div className = \"flex-1 flex flex-col\" >\r\n            <\r\n            Header user = { currentUser }\r\n            /> <\r\n            main className = \"flex-1 p-8\" > {\r\n                currentPage === 'dashboard' && < DashboardPage user = { currentUser }\r\n                requests = { requests }\r\n                onViewRequest = { handleViewRequest }\r\n                />} {\r\n                    currentPage === 'pending-requests' && < DashboardPage user = { currentUser }\r\n                    requests = { getPendingRequests() }\r\n                    onViewRequest = { handleViewRequest }\r\n                    />} {\r\n                        currentPage === 'approved-requests' && < DashboardPage user = { currentUser }\r\n                        requests = { getApprovedRequests() }\r\n                        onViewRequest = { handleViewRequest }\r\n                        />} {\r\n                            currentPage === 'rejected-requests' && < DashboardPage user = { currentUser }\r\n                            requests = { getRejectedRequests() }\r\n                            onViewRequest = { handleViewRequest }\r\n                            />} {\r\n                                currentPage === 'reports' && < ReportsPage user = { currentUser }\r\n                                />} {\r\n                                    currentPage === 'new-request' && < NewRequestForm user = { currentUser }\r\n                                    showModal = { showModalMessage }\r\n                                    />} {\r\n                                        currentPage === 'view-request' && < RequestApprovalForm user = { currentUser }\r\n                                        request = { selectedRequest }\r\n                                        showModal = { showModalMessage }\r\n                                        />} <\r\n                                        /main> <\r\n                                        /div> <\r\n                                        Modal show = { showModal }\r\n                                        onClose = {\r\n                                            () => setShowModal(false) }\r\n                                        title = \"Notification\"\r\n                                        message = { modalContent }\r\n                                        /> <\r\n                                        /div>\r\n                                    );\r\n                                }"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"var _jsxFileName = \"D:\\\\FARMERS\\\\frontend\\\\src\\\\App.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport api from './api'; // Adjust the import path as necessary\nimport './assets/css/main.css'; // Import your main CSS file\n\nimport FarmerDashboard from './dashboards/FarmerDashboard';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction App() {\n  _s();\n  const [currentUser, setCurrentUser] = useState(null);\n  const [requests, setRequests] = useState([]);\n  const [products, setProducts] = useState([]);\n  const [currentPage, setCurrentPage] = useState('dashboard');\n  useEffect(() => {\n    if (currentUser) {\n      fetchRequests();\n      fetchProducts();\n    }\n  }, [currentUser]);\n  const handleLogin = async credentials => {\n    try {\n      const response = await api.login(credentials);\n      setCurrentUser(response.data.user);\n      setCurrentPage('dashboard');\n    } catch (err) {\n      alert('Login failed: ' + (err.response && err.response.data ? err.response.data.message : err.message));\n    }\n  };\n  const fetchRequests = async () => {\n    const response = await api.getRequests();\n    setRequests(response.data);\n  };\n  const fetchProducts = async () => {\n    const response = await api.getProducts();\n    setProducts(response.data);\n  };\n  const handleProductRequest = async productId => {\n    try {\n      await api.createRequest({\n        productId,\n        userId: currentUser.id\n      });\n      fetchRequests();\n    } catch (err) {\n      alert('Request failed: ' + err.message);\n    }\n  };\n  const filteredRequests = requests.filter(req => req.userId === (currentUser ? currentUser.id : null));\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [\" \", !currentUser ? /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \" Login \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 17\n      }, this), \" \", / * Simple login form example * /, \" \", /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => handleLogin({\n          username: 'farmer',\n          password: '1234'\n        }),\n        children: \" Login as Farmer \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 73\n      }, this), \" \"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 33\n    }, this) : currentUser.role === 'Farmer' ? /*#__PURE__*/_jsxDEV(FarmerDashboard, {\n      currentUser: currentUser,\n      products: products,\n      requests: filteredRequests,\n      onRequest: handleProductRequest\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 51\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      children: \" Other dashboards not implemented yet. \"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 19\n    }, this), \" \"]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 52,\n    columnNumber: 14\n  }, this);\n}\n_s(App, \"nDZ+6umpEgZ5Z1dh6qZcpDtyBIw=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","useEffect","api","FarmerDashboard","jsxDEV","_jsxDEV","App","_s","currentUser","setCurrentUser","requests","setRequests","products","setProducts","currentPage","setCurrentPage","fetchRequests","fetchProducts","handleLogin","credentials","response","login","data","user","err","alert","message","getRequests","getProducts","handleProductRequest","productId","createRequest","userId","id","filteredRequests","filter","req","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","username","password","role","onRequest","_c","$RefreshReg$"],"sources":["D:/FARMERS/frontend/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport api from './api'; // Adjust the import path as necessary\r\nimport './assets/css/main.css'; // Import your main CSS file\r\n\r\n\r\nimport FarmerDashboard from './dashboards/FarmerDashboard';\r\n\r\nfunction App() {\r\n    const [currentUser, setCurrentUser] = useState(null);\r\n    const [requests, setRequests] = useState([]);\r\n    const [products, setProducts] = useState([]);\r\n    const [currentPage, setCurrentPage] = useState('dashboard');\r\n\r\n    useEffect(() => {\r\n        if (currentUser) {\r\n            fetchRequests();\r\n            fetchProducts();\r\n        }\r\n    }, [currentUser]);\r\n\r\n    const handleLogin = async(credentials) => {\r\n        try {\r\n            const response = await api.login(credentials);\r\n            setCurrentUser(response.data.user);\r\n            setCurrentPage('dashboard');\r\n        } catch (err) {\r\n            alert('Login failed: ' + (err.response && err.response.data ? err.response.data.message : err.message));\r\n        }\r\n    };\r\n\r\n    const fetchRequests = async() => {\r\n        const response = await api.getRequests();\r\n        setRequests(response.data);\r\n    };\r\n\r\n    const fetchProducts = async() => {\r\n        const response = await api.getProducts();\r\n        setProducts(response.data);\r\n    };\r\n\r\n    const handleProductRequest = async(productId) => {\r\n        try {\r\n            await api.createRequest({ productId, userId: currentUser.id });\r\n            fetchRequests();\r\n        } catch (err) {\r\n            alert('Request failed: ' + err.message);\r\n        }\r\n    };\r\n\r\n    const filteredRequests = requests.filter(req => req.userId === (currentUser ? currentUser.id : null));\r\n\r\n    return ( <\r\n        div > {!currentUser ? ( <\r\n                div >\r\n                <\r\n                h2 > Login < /h2> { / * Simple login form example * / } <\r\n                button onClick = {\r\n                    () => handleLogin({ username: 'farmer', password: '1234' })\r\n                } > Login as Farmer < /button> < /\r\n                div >\r\n            ) : currentUser.role === 'Farmer' ? ( <\r\n                FarmerDashboard currentUser = { currentUser }\r\n                products = { products }\r\n                requests = { filteredRequests }\r\n                onRequest = { handleProductRequest }\r\n                />\r\n            ) : ( <\r\n                div > Other dashboards not implemented yet. < /div>\r\n            )\r\n        } <\r\n        /div>\r\n    );\r\n}\r\n\r\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
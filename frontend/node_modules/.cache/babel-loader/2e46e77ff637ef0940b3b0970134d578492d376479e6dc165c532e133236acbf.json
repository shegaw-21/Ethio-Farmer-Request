{"ast":null,"code":"var _jsxFileName = \"D:\\\\FARMERS\\\\frontend\\\\src\\\\App.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { initializeApp } from 'firebase/app';\nimport { getAuth, signInWithCustomToken, onAuthStateChanged, createUserWithEmailAndPassword } from 'firebase/auth';\nimport { getFirestore, collection, doc, setDoc, getDocs } from 'firebase/firestore';\n\n// Define global variables provided by the environment\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst appId = typeof __app_id !== 'undefined' ? __app_id : 'default-app-id';\nconst firebaseConfig = typeof __firebase_config !== 'undefined' ? JSON.parse(__firebase_config) : {};\nconst initialAuthToken = typeof __initial_auth_token !== 'undefined' ? __initial_auth_token : undefined;\n\n// --- Components for different views ---\n\n// Placeholder component for the Dashboard\nconst Dashboard = () => /*#__PURE__*/_jsxDEV(\"div\", {\n  className: \"p-8\",\n  children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n    className: \"text-2xl font-bold mb-4\",\n    children: \" Federal Admin Dashboard \"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 16,\n    columnNumber: 5\n  }, this), \" \", /*#__PURE__*/_jsxDEV(\"p\", {\n    children: \" Welcome to the dashboard.You can see a summary of all requests here. \"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 17,\n    columnNumber: 79\n  }, this), \" \"]\n}, void 0, true, {\n  fileName: _jsxFileName,\n  lineNumber: 14,\n  columnNumber: 27\n}, this);\n\n// Placeholder for other admin views\n_c = Dashboard;\nconst ProductRequests = () => /*#__PURE__*/_jsxDEV(\"div\", {\n  className: \"p-8\",\n  children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n    className: \"text-2xl font-bold mb-4\",\n    children: \" All Product Requests \"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 25,\n    columnNumber: 5\n  }, this), \" \", /*#__PURE__*/_jsxDEV(\"p\", {\n    children: \" This is where you would view all product requests across all levels. \"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 26,\n    columnNumber: 76\n  }, this), \" \"]\n}, void 0, true, {\n  fileName: _jsxFileName,\n  lineNumber: 23,\n  columnNumber: 33\n}, this);\n_c2 = ProductRequests;\nconst Approvals = () => /*#__PURE__*/_jsxDEV(\"div\", {\n  className: \"p-8\",\n  children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n    className: \"text-2xl font-bold mb-4\",\n    children: \" Approvals \"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 33,\n    columnNumber: 5\n  }, this), \" \", /*#__PURE__*/_jsxDEV(\"p\", {\n    children: \" This is where you would manage pending approvals. \"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 34,\n    columnNumber: 65\n  }, this), \" \"]\n}, void 0, true, {\n  fileName: _jsxFileName,\n  lineNumber: 31,\n  columnNumber: 27\n}, this);\n\n// Component to create a new Regional Admin\n_c3 = Approvals;\nconst AddRegionalAdminForm = ({\n  db,\n  auth,\n  appId,\n  regions\n}) => {\n  _s();\n  const [fullName, setFullName] = useState('');\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [selectedRegion, setSelectedRegion] = useState(regions[0] || '');\n  const [message, setMessage] = useState('');\n  const [loading, setLoading] = useState(false);\n\n  // Handle form submission to create the new admin\n  const handleCreateAdmin = async e => {\n    e.preventDefault();\n    setLoading(true);\n    setMessage('');\n    try {\n      // Step 1: Create user in Firebase Authentication\n      // This automatically handles the password hashing and security\n      const userCredential = await createUserWithEmailAndPassword(auth, email, password);\n      const newUserId = userCredential.user.uid;\n\n      // Step 2: Store user's profile and role in Firestore\n      // Using a public collection to be accessible by other parts of the system\n      const userDocRef = doc(db, `artifacts/${appId}/public/data/admins`, newUserId);\n      await setDoc(userDocRef, {\n        user_id: newUserId,\n        full_name: fullName,\n        role: 'Region Admin',\n        location_id: selectedRegion\n      });\n      setMessage(`Success! A new Regional Admin '${fullName}' has been created for region '${selectedRegion}'. Their user ID is ${newUserId}.`);\n      // Clear form fields\n      setFullName('');\n      setEmail('');\n      setPassword('');\n      setSelectedRegion(regions[0] || '');\n    } catch (error) {\n      console.error(\"Error creating admin:\", error);\n      let errorMessage = \"An unknown error occurred. Please try again.\";\n      if (error.code === 'auth/email-already-in-use') {\n        errorMessage = 'This email is already in use. Please use a different one.';\n      } else if (error.code === 'auth/weak-password') {\n        errorMessage = 'The password is too weak. Please use a stronger password.';\n      }\n      setMessage(`Error: ${errorMessage}`);\n    } finally {\n      setLoading(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"p-8 bg-gray-50 dark:bg-gray-800 flex-1\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"max-w-2xl mx-auto bg-white dark:bg-gray-700 p-8 rounded-2xl shadow-lg\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"text-3xl font-bold mb-6 text-center text-gray-800 dark:text-gray-100\",\n        children: \" Create Regional Admin \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 9\n      }, this), \" \", /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"mb-6 text-sm text-center text-gray-600 dark:text-gray-300\",\n        children: \"As a Federal Admin, you can create new Regional Admin accounts. \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 126\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleCreateAdmin,\n        className: \"space-y-6\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"fullName\",\n            className: \"block text-sm font-medium text-gray-700 dark:text-gray-200\",\n            children: \"Full Name \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 106,\n            columnNumber: 9\n          }, this), \" \", /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            id: \"fullName\",\n            value: fullName,\n            onChange: e => setFullName(e.target.value),\n            className: \"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 dark:bg-gray-600 dark:border-gray-500 dark:text-white p-3\",\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 110,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 9\n        }, this), \" \", /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"email\",\n            className: \"block text-sm font-medium text-gray-700 dark:text-gray-200\",\n            children: \"Email Address(User ID) \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 122,\n            columnNumber: 9\n          }, this), \" \", /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"email\",\n            id: \"email\",\n            value: email,\n            onChange: e => setEmail(e.target.value),\n            className: \"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 dark:bg-gray-600 dark:border-gray-500 dark:text-white p-3\",\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 126,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 15\n        }, this), \" \", /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"password\",\n            className: \"block text-sm font-medium text-gray-700 dark:text-gray-200\",\n            children: \"Password \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 138,\n            columnNumber: 9\n          }, this), \" \", /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"password\",\n            id: \"password\",\n            value: password,\n            onChange: e => setPassword(e.target.value),\n            className: \"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 dark:bg-gray-600 dark:border-gray-500 dark:text-white p-3\",\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 142,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 15\n        }, this), \" \", /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"region\",\n            className: \"block text-sm font-medium text-gray-700 dark:text-gray-200\",\n            children: \"Assign Region \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 154,\n            columnNumber: 9\n          }, this), \" \", /*#__PURE__*/_jsxDEV(\"select\", {\n            id: \"region\",\n            value: selectedRegion,\n            onChange: e => setSelectedRegion(e.target.value),\n            className: \"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 dark:bg-gray-600 dark:border-gray-500 dark:text-white p-3\",\n            required: true,\n            children: [regions.map(region => /*#__PURE__*/_jsxDEV(\"option\", {\n              value: region,\n              children: [\" \", region, \" \"]\n            }, region, true, {\n              fileName: _jsxFileName,\n              lineNumber: 166,\n              columnNumber: 39\n            }, this)), \" \"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 158,\n            columnNumber: 17\n          }, this), \" \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 152,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          disabled: loading || !db || !auth,\n          className: \"w-full flex justify-center py-3 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 transition duration-150 ease-in-out\",\n          children: [loading ? 'Creating...' : 'Create Regional Admin', \" \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 175,\n          columnNumber: 9\n        }, this), \" \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 9\n      }, this), message && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `mt-6 text-center text-sm font-medium p-4 rounded-md ${message.startsWith('Error') ? 'bg-red-100 text-red-700' : 'bg-green-100 text-green-700'}`,\n        children: [\" \", message, \" \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 26\n      }, this), \" \"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 9\n    }, this), \" \"]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 91,\n    columnNumber: 14\n  }, this);\n};\n\n// --- Main App Component ---\n_s(AddRegionalAdminForm, \"5nrXOb3zxcuLeZ2VoDv12y7k91k=\");\n_c4 = AddRegionalAdminForm;\nconst App = () => {\n  _s2();\n  const [db, setDb] = useState(null);\n  const [auth, setAuth] = useState(null);\n  const [userId, setUserId] = useState(null);\n  const [isAuthReady, setIsAuthReady] = useState(false);\n  const [userRole, setUserRole] = useState(null);\n  const [regions, setRegions] = useState([]);\n  const [currentView, setCurrentView] = useState('dashboard');\n  const [loading, setLoading] = useState(true);\n\n  // Initialize Firebase and set up auth listener\n  useEffect(() => {\n    const initFirebase = async () => {\n      try {\n        const app = initializeApp(firebaseConfig);\n        const firestoreDb = getFirestore(app);\n        const firebaseAuth = getAuth(app);\n        setDb(firestoreDb);\n        setAuth(firebaseAuth);\n        onAuthStateChanged(firebaseAuth, async user => {\n          if (user) {\n            setUserId(user.uid);\n            await fetchAndSetUserRole(firestoreDb, user.uid);\n            await fetchRegions(firestoreDb);\n          } else {\n            // Sign in with the custom token or anonymously\n            if (initialAuthToken) {\n              await signInWithCustomToken(firebaseAuth, initialAuthToken);\n            } else {\n              await signInAnonymously(firebaseAuth);\n            }\n          }\n          setIsAuthReady(true);\n          setLoading(false);\n        });\n      } catch (error) {\n        console.error(\"Firebase initialization or auth error:\", error);\n        setLoading(false);\n      }\n    };\n    initFirebase();\n  }, []);\n\n  // Fetch and set the user's role from Firestore\n  const fetchAndSetUserRole = async (firestoreDb, uid) => {\n    try {\n      const userDocRef = doc(firestoreDb, `artifacts/${appId}/public/data/admins`, uid);\n      const docSnap = await getDoc(userDocRef);\n      if (docSnap.exists()) {\n        const userData = docSnap.data();\n        setUserRole(userData.role);\n      } else {\n        // Assume Federal Admin for this demo if not found in admins table\n        // In a real app, you would have a more robust way to determine this\n        setUserRole('Federal Admin');\n      }\n    } catch (error) {\n      console.error(\"Error fetching user role:\", error);\n    }\n  };\n\n  // Fetch regions from Firestore\n  const fetchRegions = async firestoreDb => {\n    try {\n      const collectionRef = collection(firestoreDb, `artifacts/${appId}/public/data/locations`);\n      const querySnapshot = await getDocs(collectionRef);\n      const fetchedRegions = querySnapshot.docs.map(doc => doc.data().region);\n      setRegions(fetchedRegions);\n    } catch (error) {\n      console.error(\"Error fetching regions:\", error);\n    }\n  };\n  const renderContent = () => {\n    if (loading) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"p-8 text-center text-gray-500\",\n        children: \" Loading... \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 274,\n        columnNumber: 20\n      }, this);\n    }\n    if (!userId || userRole !== 'Federal Admin') {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"p-8 text-center text-red-500\",\n        children: \"Access Denied.You must be logged in as a Federal Admin to use this application. \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 277,\n        columnNumber: 22\n      }, this);\n    }\n    switch (currentView) {\n      case 'dashboard':\n        return /*#__PURE__*/_jsxDEV(Dashboard, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 286,\n          columnNumber: 24\n        }, this);\n      case 'productRequests':\n        return /*#__PURE__*/_jsxDEV(ProductRequests, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 288,\n          columnNumber: 24\n        }, this);\n      case 'approvals':\n        return /*#__PURE__*/_jsxDEV(Approvals, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 290,\n          columnNumber: 24\n        }, this);\n      case 'masterData':\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-8\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"text-2xl font-bold mb-4\",\n            children: \" Master Data \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 294,\n            columnNumber: 21\n          }, this), \" \", /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"mb-4\",\n            children: \" Here you can manage products, locations, and users. \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 295,\n            columnNumber: 83\n          }, this), \" \", /*#__PURE__*/_jsxDEV(AddRegionalAdminForm, {\n            db: db,\n            auth: auth,\n            appId: appId,\n            regions: regions\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 296,\n            columnNumber: 102\n          }, this), \" \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 292,\n          columnNumber: 26\n        }, this);\n      default:\n        return /*#__PURE__*/_jsxDEV(Dashboard, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 305,\n          columnNumber: 24\n        }, this);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen flex bg-gray-100 dark:bg-gray-900 text-gray-900 dark:text-white\",\n    children: [\" \", \" \", /*#__PURE__*/_jsxDEV(\"aside\", {\n      className: \"w-64 bg-white dark:bg-gray-800 shadow-lg p-6 flex flex-col justify-between\",\n      children: [/*#__PURE__*/_jsxDEV(\"nav\", {\n        className: \"space-y-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-4 text-center\",\n          children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n            className: \"text-xl font-bold\",\n            children: \" Admin Panel \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 316,\n            columnNumber: 9\n          }, this), \" \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 314,\n          columnNumber: 9\n        }, this), \" \", /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setCurrentView('dashboard'),\n          className: `w-full text-left p-3 rounded-xl transition-all duration-200 ${currentView === 'dashboard' ? 'bg-indigo-600 text-white shadow-md' : 'text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700'}`,\n          children: \"Dashboard \"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 318,\n          columnNumber: 15\n        }, this), \" \", /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setCurrentView('productRequests'),\n          className: `w-full text-left p-3 rounded-xl transition-all duration-200 ${currentView === 'productRequests' ? 'bg-indigo-600 text-white shadow-md' : 'text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700'}`,\n          children: \"Product Requests \"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 323,\n          columnNumber: 18\n        }, this), \" \", /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setCurrentView('approvals'),\n          className: `w-full text-left p-3 rounded-xl transition-all duration-200 ${currentView === 'approvals' ? 'bg-indigo-600 text-white shadow-md' : 'text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700'}`,\n          children: \"Approvals \"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 328,\n          columnNumber: 18\n        }, this), \" \", /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setCurrentView('masterData'),\n          className: `w-full text-left p-3 rounded-xl transition-all duration-200 ${currentView === 'masterData' ? 'bg-indigo-600 text-white shadow-md' : 'text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700'}`,\n          children: \"Master Data \"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 333,\n          columnNumber: 18\n        }, this), \" \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 312,\n        columnNumber: 9\n      }, this), \" \"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 310,\n      columnNumber: 135\n    }, this), \" \", /*#__PURE__*/_jsxDEV(\"main\", {\n      className: \"flex-1 p-8 overflow-y-auto\",\n      children: [\" \", renderContent(), \" \"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 342,\n      columnNumber: 37\n    }, this), \" \"]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 309,\n    columnNumber: 14\n  }, this);\n};\n_s2(App, \"12KCHs7nIXBPVrUOp7A+5STq2Us=\");\n_c5 = App;\nexport default App;\nvar _c, _c2, _c3, _c4, _c5;\n$RefreshReg$(_c, \"Dashboard\");\n$RefreshReg$(_c2, \"ProductRequests\");\n$RefreshReg$(_c3, \"Approvals\");\n$RefreshReg$(_c4, \"AddRegionalAdminForm\");\n$RefreshReg$(_c5, \"App\");","map":{"version":3,"names":["React","useState","useEffect","initializeApp","getAuth","signInWithCustomToken","onAuthStateChanged","createUserWithEmailAndPassword","getFirestore","collection","doc","setDoc","getDocs","jsxDEV","_jsxDEV","appId","__app_id","firebaseConfig","__firebase_config","JSON","parse","initialAuthToken","__initial_auth_token","undefined","Dashboard","className","children","fileName","_jsxFileName","lineNumber","columnNumber","_c","ProductRequests","_c2","Approvals","_c3","AddRegionalAdminForm","db","auth","regions","_s","fullName","setFullName","email","setEmail","password","setPassword","selectedRegion","setSelectedRegion","message","setMessage","loading","setLoading","handleCreateAdmin","e","preventDefault","userCredential","newUserId","user","uid","userDocRef","user_id","full_name","role","location_id","error","console","errorMessage","code","onSubmit","htmlFor","type","id","value","onChange","target","required","map","region","disabled","startsWith","_c4","App","_s2","setDb","setAuth","userId","setUserId","isAuthReady","setIsAuthReady","userRole","setUserRole","setRegions","currentView","setCurrentView","initFirebase","app","firestoreDb","firebaseAuth","fetchAndSetUserRole","fetchRegions","signInAnonymously","docSnap","getDoc","exists","userData","data","collectionRef","querySnapshot","fetchedRegions","docs","renderContent","onClick","_c5","$RefreshReg$"],"sources":["D:/FARMERS/frontend/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { initializeApp } from 'firebase/app';\nimport { getAuth, signInWithCustomToken, onAuthStateChanged, createUserWithEmailAndPassword } from 'firebase/auth';\nimport { getFirestore, collection, doc, setDoc, getDocs } from 'firebase/firestore';\n\n// Define global variables provided by the environment\nconst appId = typeof __app_id !== 'undefined' ? __app_id : 'default-app-id';\nconst firebaseConfig = typeof __firebase_config !== 'undefined' ? JSON.parse(__firebase_config) : {};\nconst initialAuthToken = typeof __initial_auth_token !== 'undefined' ? __initial_auth_token : undefined;\n\n// --- Components for different views ---\n\n// Placeholder component for the Dashboard\nconst Dashboard = () => ( <\n    div className = \"p-8\" >\n    <\n    h2 className = \"text-2xl font-bold mb-4\" > Federal Admin Dashboard < /h2> <\n    p > Welcome to the dashboard.You can see a summary of all requests here. < /p> <\n    /div>\n);\n\n// Placeholder for other admin views\nconst ProductRequests = () => ( <\n    div className = \"p-8\" >\n    <\n    h2 className = \"text-2xl font-bold mb-4\" > All Product Requests < /h2> <\n    p > This is where you would view all product requests across all levels. < /p> <\n    /div>\n);\n\nconst Approvals = () => ( <\n    div className = \"p-8\" >\n    <\n    h2 className = \"text-2xl font-bold mb-4\" > Approvals < /h2> <\n    p > This is where you would manage pending approvals. < /p> <\n    /div>\n);\n\n// Component to create a new Regional Admin\nconst AddRegionalAdminForm = ({ db, auth, appId, regions }) => {\n    const [fullName, setFullName] = useState('');\n    const [email, setEmail] = useState('');\n    const [password, setPassword] = useState('');\n    const [selectedRegion, setSelectedRegion] = useState(regions[0] || '');\n    const [message, setMessage] = useState('');\n    const [loading, setLoading] = useState(false);\n\n    // Handle form submission to create the new admin\n    const handleCreateAdmin = async(e) => {\n        e.preventDefault();\n        setLoading(true);\n        setMessage('');\n\n        try {\n            // Step 1: Create user in Firebase Authentication\n            // This automatically handles the password hashing and security\n            const userCredential = await createUserWithEmailAndPassword(auth, email, password);\n            const newUserId = userCredential.user.uid;\n\n            // Step 2: Store user's profile and role in Firestore\n            // Using a public collection to be accessible by other parts of the system\n            const userDocRef = doc(db, `artifacts/${appId}/public/data/admins`, newUserId);\n            await setDoc(userDocRef, {\n                user_id: newUserId,\n                full_name: fullName,\n                role: 'Region Admin',\n                location_id: selectedRegion,\n            });\n\n            setMessage(`Success! A new Regional Admin '${fullName}' has been created for region '${selectedRegion}'. Their user ID is ${newUserId}.`);\n            // Clear form fields\n            setFullName('');\n            setEmail('');\n            setPassword('');\n            setSelectedRegion(regions[0] || '');\n\n        } catch (error) {\n            console.error(\"Error creating admin:\", error);\n            let errorMessage = \"An unknown error occurred. Please try again.\";\n            if (error.code === 'auth/email-already-in-use') {\n                errorMessage = 'This email is already in use. Please use a different one.';\n            } else if (error.code === 'auth/weak-password') {\n                errorMessage = 'The password is too weak. Please use a stronger password.';\n            }\n            setMessage(`Error: ${errorMessage}`);\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    return ( <\n        div className = \"p-8 bg-gray-50 dark:bg-gray-800 flex-1\" >\n        <\n        div className = \"max-w-2xl mx-auto bg-white dark:bg-gray-700 p-8 rounded-2xl shadow-lg\" >\n        <\n        h2 className = \"text-3xl font-bold mb-6 text-center text-gray-800 dark:text-gray-100\" > Create Regional Admin < /h2> <\n        p className = \"mb-6 text-sm text-center text-gray-600 dark:text-gray-300\" >\n        As a Federal Admin, you can create new Regional Admin accounts. <\n        /p>\n\n        <\n        form onSubmit = { handleCreateAdmin }\n        className = \"space-y-6\" >\n        <\n        div >\n        <\n        label htmlFor = \"fullName\"\n        className = \"block text-sm font-medium text-gray-700 dark:text-gray-200\" >\n        Full Name <\n        /label> <\n        input type = \"text\"\n        id = \"fullName\"\n        value = { fullName }\n        onChange = {\n            (e) => setFullName(e.target.value) }\n        className = \"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 dark:bg-gray-600 dark:border-gray-500 dark:text-white p-3\"\n        required /\n        >\n        <\n        /div> <\n        div >\n        <\n        label htmlFor = \"email\"\n        className = \"block text-sm font-medium text-gray-700 dark:text-gray-200\" >\n        Email Address(User ID) <\n        /label> <\n        input type = \"email\"\n        id = \"email\"\n        value = { email }\n        onChange = {\n            (e) => setEmail(e.target.value) }\n        className = \"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 dark:bg-gray-600 dark:border-gray-500 dark:text-white p-3\"\n        required /\n        >\n        <\n        /div> <\n        div >\n        <\n        label htmlFor = \"password\"\n        className = \"block text-sm font-medium text-gray-700 dark:text-gray-200\" >\n        Password <\n        /label> <\n        input type = \"password\"\n        id = \"password\"\n        value = { password }\n        onChange = {\n            (e) => setPassword(e.target.value) }\n        className = \"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 dark:bg-gray-600 dark:border-gray-500 dark:text-white p-3\"\n        required /\n        >\n        <\n        /div> <\n        div >\n        <\n        label htmlFor = \"region\"\n        className = \"block text-sm font-medium text-gray-700 dark:text-gray-200\" >\n        Assign Region <\n        /label> <\n        select id = \"region\"\n        value = { selectedRegion }\n        onChange = {\n            (e) => setSelectedRegion(e.target.value) }\n        className = \"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 dark:bg-gray-600 dark:border-gray-500 dark:text-white p-3\"\n        required >\n        {\n            regions.map((region) => ( <\n                option key = { region }\n                value = { region } > { region } <\n                /option>\n            ))\n        } <\n        /select> <\n        /div>\n\n        <\n        button type = \"submit\"\n        disabled = { loading || !db || !auth }\n        className = \"w-full flex justify-center py-3 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 transition duration-150 ease-in-out\" >\n        { loading ? 'Creating...' : 'Create Regional Admin' } <\n        /button> <\n        /form>\n\n        {\n            message && ( <\n                div className = { `mt-6 text-center text-sm font-medium p-4 rounded-md ${\n            message.startsWith('Error') ? 'bg-red-100 text-red-700' : 'bg-green-100 text-green-700'\n          }` } > { message } <\n                /div>\n            )\n        } <\n        /div> <\n        /div>\n    );\n};\n\n// --- Main App Component ---\nconst App = () => {\n    const [db, setDb] = useState(null);\n    const [auth, setAuth] = useState(null);\n    const [userId, setUserId] = useState(null);\n    const [isAuthReady, setIsAuthReady] = useState(false);\n    const [userRole, setUserRole] = useState(null);\n    const [regions, setRegions] = useState([]);\n    const [currentView, setCurrentView] = useState('dashboard');\n    const [loading, setLoading] = useState(true);\n\n    // Initialize Firebase and set up auth listener\n    useEffect(() => {\n        const initFirebase = async() => {\n            try {\n                const app = initializeApp(firebaseConfig);\n                const firestoreDb = getFirestore(app);\n                const firebaseAuth = getAuth(app);\n                setDb(firestoreDb);\n                setAuth(firebaseAuth);\n\n                onAuthStateChanged(firebaseAuth, async(user) => {\n                    if (user) {\n                        setUserId(user.uid);\n                        await fetchAndSetUserRole(firestoreDb, user.uid);\n                        await fetchRegions(firestoreDb);\n                    } else {\n                        // Sign in with the custom token or anonymously\n                        if (initialAuthToken) {\n                            await signInWithCustomToken(firebaseAuth, initialAuthToken);\n                        } else {\n                            await signInAnonymously(firebaseAuth);\n                        }\n                    }\n                    setIsAuthReady(true);\n                    setLoading(false);\n                });\n\n            } catch (error) {\n                console.error(\"Firebase initialization or auth error:\", error);\n                setLoading(false);\n            }\n        };\n        initFirebase();\n    }, []);\n\n    // Fetch and set the user's role from Firestore\n    const fetchAndSetUserRole = async(firestoreDb, uid) => {\n        try {\n            const userDocRef = doc(firestoreDb, `artifacts/${appId}/public/data/admins`, uid);\n            const docSnap = await getDoc(userDocRef);\n            if (docSnap.exists()) {\n                const userData = docSnap.data();\n                setUserRole(userData.role);\n            } else {\n                // Assume Federal Admin for this demo if not found in admins table\n                // In a real app, you would have a more robust way to determine this\n                setUserRole('Federal Admin');\n            }\n        } catch (error) {\n            console.error(\"Error fetching user role:\", error);\n        }\n    };\n\n    // Fetch regions from Firestore\n    const fetchRegions = async(firestoreDb) => {\n        try {\n            const collectionRef = collection(firestoreDb, `artifacts/${appId}/public/data/locations`);\n            const querySnapshot = await getDocs(collectionRef);\n            const fetchedRegions = querySnapshot.docs.map(doc => doc.data().region);\n            setRegions(fetchedRegions);\n        } catch (error) {\n            console.error(\"Error fetching regions:\", error);\n        }\n    };\n\n    const renderContent = () => {\n        if (loading) {\n            return <div className = \"p-8 text-center text-gray-500\" > Loading... < /div>;\n        }\n        if (!userId || userRole !== 'Federal Admin') {\n            return ( <\n                div className = \"p-8 text-center text-red-500\" >\n                Access Denied.You must be logged in as a Federal Admin to use this application. <\n                /div>\n            );\n        }\n\n        switch (currentView) {\n            case 'dashboard':\n                return <Dashboard / > ;\n            case 'productRequests':\n                return <ProductRequests / > ;\n            case 'approvals':\n                return <Approvals / > ;\n            case 'masterData':\n                return ( <\n                    div className = \"p-8\" >\n                    <\n                    h2 className = \"text-2xl font-bold mb-4\" > Master Data < /h2> <\n                    p className = \"mb-4\" > Here you can manage products, locations, and users. < /p> <\n                    AddRegionalAdminForm db = { db }\n                    auth = { auth }\n                    appId = { appId }\n                    regions = { regions }\n                    /> <\n                    /div>\n                );\n            default:\n                return <Dashboard / > ;\n        }\n    };\n\n    return ( <\n        div className = \"min-h-screen flex bg-gray-100 dark:bg-gray-900 text-gray-900 dark:text-white\" > { /* Sidebar Navigation */ } <\n        aside className = \"w-64 bg-white dark:bg-gray-800 shadow-lg p-6 flex flex-col justify-between\" >\n        <\n        nav className = \"space-y-2\" >\n        <\n        div className = \"p-4 text-center\" >\n        <\n        h1 className = \"text-xl font-bold\" > Admin Panel < /h1> <\n        /div> <\n        button onClick = {\n            () => setCurrentView('dashboard') }\n        className = { `w-full text-left p-3 rounded-xl transition-all duration-200 ${currentView === 'dashboard' ? 'bg-indigo-600 text-white shadow-md' : 'text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700'}` } >\n        Dashboard <\n        /button> <\n        button onClick = {\n            () => setCurrentView('productRequests') }\n        className = { `w-full text-left p-3 rounded-xl transition-all duration-200 ${currentView === 'productRequests' ? 'bg-indigo-600 text-white shadow-md' : 'text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700'}` } >\n        Product Requests <\n        /button> <\n        button onClick = {\n            () => setCurrentView('approvals') }\n        className = { `w-full text-left p-3 rounded-xl transition-all duration-200 ${currentView === 'approvals' ? 'bg-indigo-600 text-white shadow-md' : 'text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700'}` } >\n        Approvals <\n        /button> <\n        button onClick = {\n            () => setCurrentView('masterData') }\n        className = { `w-full text-left p-3 rounded-xl transition-all duration-200 ${currentView === 'masterData' ? 'bg-indigo-600 text-white shadow-md' : 'text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700'}` } >\n        Master Data <\n        /button> <\n        /nav> <\n        /aside>\n\n        { /* Main Content Area */ } <\n        main className = \"flex-1 p-8 overflow-y-auto\" > { renderContent() } <\n        /main> <\n        /div>\n    );\n};\n\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}